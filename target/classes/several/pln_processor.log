<<<<<<< HEAD
2025-04-21 15:58:17,602 - PLN_Processor - INFO - Verificando/Baixando dados NLTK em: C:\Users\MENICIO JR\AppData\Roaming\nltk_data
2025-04-21 15:58:17,602 - PLN_Processor - DEBUG - 'punkt' já existe.
2025-04-21 15:58:17,603 - PLN_Processor - DEBUG - 'rslp' já existe.
2025-04-21 15:58:17,603 - PLN_Processor - INFO - Pacotes NLTK verificados/baixados (ou já existentes).
2025-04-21 15:58:19,383 - PLN_Processor - INFO - Modelo spaCy 'pt_core_news_sm' carregado.
2025-04-21 15:58:19,383 - PLN_Processor - INFO - Diretório base do script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-04-21 15:58:19,384 - PLN_Processor - INFO - Diretório de recursos assumido: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-04-21 15:58:19,384 - PLN_Processor - INFO - Tentando carregar dicionário de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-04-21 15:58:19,384 - PLN_Processor - INFO - Tentando carregar perguntas de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-04-21 15:58:19,385 - PLN_Processor - INFO - --- ================================= ---
2025-04-21 15:58:19,385 - PLN_Processor - INFO - --- Iniciando processamento PLN Script (PID: 15992) ---
2025-04-21 15:58:19,385 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:/Users/MENICIO JR/Desktop/Natural2SPARQL-master/src/main/resources/pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-04-21 15:58:19,385 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master(2)\Natural2SPARQL-master ---
2025-04-21 15:58:19,385 - PLN_Processor - INFO - --- Python Executable: D:\Anaconda\python.exe ---
2025-04-21 15:58:19,385 - PLN_Processor - INFO - Pergunta recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-04-21 15:58:19,386 - PLN_Processor - INFO - Carregando configs...
2025-04-21 15:58:19,386 - PLN_Processor - DEBUG - Tentando carregar arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-04-21 15:58:19,388 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com encoding: utf-8
2025-04-21 15:58:19,389 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-04-21 15:58:19,390 - PLN_Processor - DEBUG - Tentando carregar arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-04-21 15:58:19,391 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com encoding: utf-8
2025-04-21 15:58:19,392 - PLN_Processor - DEBUG - Carregadas 156 linhas de 'resultado_similaridade.txt'.
2025-04-21 15:58:19,393 - PLN_Processor - INFO - Processando dicionário de sinônimos de 'resultado_similaridade.txt'...
2025-04-21 15:58:19,394 - PLN_Processor - DEBUG -   - Chave 'acao': 5 sinônimos.
2025-04-21 15:58:19,394 - PLN_Processor - DEBUG -   - Chave 'acessorios': 9 sinônimos.
2025-04-21 15:58:19,394 - PLN_Processor - DEBUG -   - Chave 'acucar_e_alcool': 7 sinônimos.
2025-04-21 15:58:19,395 - PLN_Processor - DEBUG -   - Chave 'aereo': 6 sinônimos.
2025-04-21 15:58:19,395 - PLN_Processor - DEBUG -   - Chave 'agricultura': 7 sinônimos.
2025-04-21 15:58:19,395 - PLN_Processor - DEBUG -   - Chave 'agropecuaria': 9 sinônimos.
2025-04-21 15:58:19,395 - PLN_Processor - DEBUG -   - Chave 'agua_e_saneamento': 5 sinônimos.
2025-04-21 15:58:19,395 - PLN_Processor - DEBUG -   - Chave 'alimentos': 5 sinônimos.
2025-04-21 15:58:19,396 - PLN_Processor - DEBUG -   - Chave 'alimentos_diversos': 10 sinônimos.
2025-04-21 15:58:19,396 - PLN_Processor - DEBUG -   - Chave 'alimentos_processados': 2 sinônimos.
2025-04-21 15:58:19,396 - PLN_Processor - DEBUG -   - Chave 'aluguel_de_carros': 4 sinônimos.
2025-04-21 15:58:19,396 - PLN_Processor - DEBUG -   - Chave 'armas_e_municoes': 4 sinônimos.
2025-04-21 15:58:19,396 - PLN_Processor - DEBUG -   - Chave 'artefatos_de_cobre': 3 sinônimos.
2025-04-21 15:58:19,397 - PLN_Processor - DEBUG -   - Chave 'artefatos_de_ferro_e_aco': 2 sinônimos.
2025-04-21 15:58:19,397 - PLN_Processor - DEBUG -   - Chave 'atividades_esportivas': 3 sinônimos.
2025-04-21 15:58:19,397 - PLN_Processor - DEBUG -   - Chave 'automoveis_e_motocicletas': 4 sinônimos.
2025-04-21 15:58:19,397 - PLN_Processor - DEBUG -   - Chave 'bancos': 4 sinônimos.
2025-04-21 15:58:19,397 - PLN_Processor - DEBUG -   - Chave 'bebidas': 1 sinônimos.
2025-04-21 15:58:19,397 - PLN_Processor - DEBUG -   - Chave 'bens_industriais': 3 sinônimos.
2025-04-21 15:58:19,398 - PLN_Processor - DEBUG -   - Chave 'bicicletas': 4 sinônimos.
2025-04-21 15:58:19,398 - PLN_Processor - DEBUG -   - Chave 'bolsa_de_valores': 5 sinônimos.
2025-04-21 15:58:19,398 - PLN_Processor - DEBUG -   - Chave 'brazilian_depositary_receipt': 3 sinônimos.
2025-04-21 15:58:19,398 - PLN_Processor - DEBUG -   - Chave 'brinquedos_e_jogos': 3 sinônimos.
2025-04-21 15:58:19,398 - PLN_Processor - DEBUG -   - Chave 'calcados': 8 sinônimos.
2025-04-21 15:58:19,398 - PLN_Processor - DEBUG -   - Chave 'carnes_e_derivados': 5 sinônimos.
2025-04-21 15:58:19,399 - PLN_Processor - DEBUG -   - Chave 'certificado_de_deposito_de_acoes': 3 sinônimos.
2025-04-21 15:58:19,399 - PLN_Processor - DEBUG -   - Chave 'cervejas_e_refrigerantes': 9 sinônimos.
2025-04-21 15:58:19,399 - PLN_Processor - DEBUG -   - Chave 'classe_a': 1 sinônimos.
2025-04-21 15:58:19,399 - PLN_Processor - DEBUG -   - Chave 'classe_b': 1 sinônimos.
2025-04-21 15:58:19,399 - PLN_Processor - DEBUG -   - Chave 'codigo': 4 sinônimos.
2025-04-21 15:58:19,400 - PLN_Processor - DEBUG -   - Chave 'codigo_negociacao': 4 sinônimos.
2025-04-21 15:58:19,400 - PLN_Processor - DEBUG -   - Chave 'comercio': 3 sinônimos.
2025-04-21 15:58:19,400 - PLN_Processor - DEBUG -   - Chave 'comercio_de_eletrodomesticos': 4 sinônimos.
2025-04-21 15:58:19,400 - PLN_Processor - DEBUG -   - Chave 'comercio_de_materiais_de_transporte': 7 sinônimos.
2025-04-21 15:58:19,400 - PLN_Processor - DEBUG -   - Chave 'comercio_e_distribuicao': 1 sinônimos.
2025-04-21 15:58:19,400 - PLN_Processor - DEBUG -   - Chave 'comercio_e_distribuicao_de_medicamentos_e_outros_produtos': 5 sinônimos.
2025-04-21 15:58:19,401 - PLN_Processor - DEBUG -   - Chave 'computadores_e_equipamentos': 3 sinônimos.
2025-04-21 15:58:19,401 - PLN_Processor - DEBUG -   - Chave 'comunicacoes': 4 sinônimos.
2025-04-21 15:58:19,401 - PLN_Processor - DEBUG -   - Chave 'construcao_civil': 1 sinônimos.
2025-04-21 15:58:19,401 - PLN_Processor - DEBUG -   - Chave 'construcao_pesada': 2 sinônimos.
2025-04-21 15:58:19,401 - PLN_Processor - DEBUG -   - Chave 'construcao_e_agricolas': 3 sinônimos.
2025-04-21 15:58:19,401 - PLN_Processor - DEBUG -   - Chave 'construcao_e_engenharia': 1 sinônimos.
2025-04-21 15:58:19,401 - PLN_Processor - DEBUG -   - Chave 'consumo_ciclico': 4 sinônimos.
2025-04-21 15:58:19,402 - PLN_Processor - DEBUG -   - Chave 'consumo_nao_ciclico': 7 sinônimos.
2025-04-21 15:58:19,402 - PLN_Processor - DEBUG -   - Chave 'corretoras_de_seguros_e_resseguros': 8 sinônimos.
2025-04-21 15:58:19,402 - PLN_Processor - DEBUG -   - Chave 'debenture': 4 sinônimos.
2025-04-21 15:58:19,402 - PLN_Processor - DEBUG -   - Chave 'diversos': 1 sinônimos.
2025-04-21 15:58:19,402 - PLN_Processor - DEBUG -   - Chave 'eletrodomesticos': 4 sinônimos.
2025-04-21 15:58:19,402 - PLN_Processor - DEBUG -   - Chave 'embalagens': 6 sinônimos.
2025-04-21 15:58:19,403 - PLN_Processor - DEBUG -   - Chave 'empresa': 5 sinônimos.
2025-04-21 15:58:19,403 - PLN_Processor - DEBUG -   - Chave 'empresa_capital_aberto': 5 sinônimos.
2025-04-21 15:58:19,403 - PLN_Processor - DEBUG -   - Chave 'energia_eletrica': 7 sinônimos.
2025-04-21 15:58:19,403 - PLN_Processor - DEBUG -   - Chave 'engenharia_consultiva': 3 sinônimos.
2025-04-21 15:58:19,403 - PLN_Processor - DEBUG -   - Chave 'equipamentos': 7 sinônimos.
2025-04-21 15:58:19,403 - PLN_Processor - DEBUG -   - Chave 'equipamentos_e_servicos': 5 sinônimos.
2025-04-21 15:58:19,404 - PLN_Processor - DEBUG -   - Chave 'exploracao_refino_e_distribuicao': 7 sinônimos.
2025-04-21 15:58:19,404 - PLN_Processor - DEBUG -   - Chave 'exploracao_de_imoveis': 12 sinônimos.
2025-04-21 15:58:19,404 - PLN_Processor - DEBUG -   - Chave 'exploracao_de_rodovias': 3 sinônimos.
2025-04-21 15:58:19,404 - PLN_Processor - DEBUG -   - Chave 'ferroviario': 7 sinônimos.
2025-04-21 15:58:19,404 - PLN_Processor - DEBUG -   - Chave 'fertilizantes_e_defensivos': 5 sinônimos.
2025-04-21 15:58:19,405 - PLN_Processor - DEBUG -   - Chave 'financeiro': 6 sinônimos.
2025-04-21 15:58:19,405 - PLN_Processor - DEBUG -   - Chave 'fios_e_tecidos': 7 sinônimos.
2025-04-21 15:58:19,405 - PLN_Processor - DEBUG -   - Chave 'gas': 3 sinônimos.
2025-04-21 15:58:19,405 - PLN_Processor - DEBUG -   - Chave 'gestao_de_recursos_e_investimentos': 3 sinônimos.
2025-04-21 15:58:19,405 - PLN_Processor - DEBUG -   - Chave 'hidroviario': 7 sinônimos.
2025-04-21 15:58:19,406 - PLN_Processor - DEBUG -   - Chave 'holdings_diversificadas': 3 sinônimos.
2025-04-21 15:58:19,406 - PLN_Processor - DEBUG -   - Chave 'hoteis_e_restaurantes': 1 sinônimos.
2025-04-21 15:58:19,406 - PLN_Processor - DEBUG -   - Chave 'hotelaria': 5 sinônimos.
2025-04-21 15:58:19,406 - PLN_Processor - DEBUG -   - Chave 'incorporacoes': 4 sinônimos.
2025-04-21 15:58:19,406 - PLN_Processor - DEBUG -   - Chave 'indice': 4 sinônimos.
2025-04-21 15:58:19,406 - PLN_Processor - DEBUG -   - Chave 'indice_amplo': 4 sinônimos.
2025-04-21 15:58:19,406 - PLN_Processor - DEBUG -   - Chave 'indice_setorial': 4 sinônimos.
2025-04-21 15:58:19,407 - PLN_Processor - DEBUG -   - Chave 'industriais': 10 sinônimos.
2025-04-21 15:58:19,407 - PLN_Processor - DEBUG -   - Chave 'intermediacao_imobiliaria': 9 sinônimos.
2025-04-21 15:58:19,407 - PLN_Processor - DEBUG -   - Chave 'intermediarios_financeiros': 4 sinônimos.
2025-04-21 15:58:19,407 - PLN_Processor - DEBUG -   - Chave 'laticinios': 5 sinônimos.
2025-04-21 15:58:19,407 - PLN_Processor - DEBUG -   - Chave 'madeira': 8 sinônimos.
2025-04-21 15:58:19,408 - PLN_Processor - DEBUG -   - Chave 'madeira_e_papel': 1 sinônimos.
2025-04-21 15:58:19,408 - PLN_Processor - DEBUG -   - Chave 'maquinas_e_equipamentos': 1 sinônimos.
2025-04-21 15:58:19,408 - PLN_Processor - DEBUG -   - Chave 'materiais_basicos': 5 sinônimos.
2025-04-21 15:58:19,408 - PLN_Processor - DEBUG -   - Chave 'materiais_diversos': 5 sinônimos.
2025-04-21 15:58:19,408 - PLN_Processor - DEBUG -   - Chave 'material_aeronautico_e_de_defesa': 5 sinônimos.
2025-04-21 15:58:19,408 - PLN_Processor - DEBUG -   - Chave 'material_rodoviario': 8 sinônimos.
2025-04-21 15:58:19,409 - PLN_Processor - DEBUG -   - Chave 'material_de_transporte': 1 sinônimos.
2025-04-21 15:58:19,409 - PLN_Processor - DEBUG -   - Chave 'medicamentos_e_outros_produtos': 6 sinônimos.
2025-04-21 15:58:19,409 - PLN_Processor - DEBUG -   - Chave 'midia': 1 sinônimos.
2025-04-21 15:58:19,409 - PLN_Processor - DEBUG -   - Chave 'mineracao': 2 sinônimos.
2025-04-21 15:58:19,409 - PLN_Processor - DEBUG -   - Chave 'minerais_metalicos': 9 sinônimos.
2025-04-21 15:58:19,410 - PLN_Processor - DEBUG -   - Chave 'motores_compressores_e_outros': 9 sinônimos.
2025-04-21 15:58:19,410 - PLN_Processor - DEBUG -   - Chave 'moveis': 4 sinônimos.
2025-04-21 15:58:19,410 - PLN_Processor - DEBUG -   - Chave 'negociado_em_diferentes_pregoes': 1 sinônimos.
2025-04-21 15:58:19,411 - PLN_Processor - DEBUG -   - Chave 'negociado_em_pregao': 1 sinônimos.
2025-04-21 15:58:19,411 - PLN_Processor - DEBUG -   - Chave 'ordinaria': 4 sinônimos.
2025-04-21 15:58:19,411 - PLN_Processor - DEBUG -   - Chave 'outros': 4 sinônimos.
2025-04-21 15:58:19,412 - PLN_Processor - DEBUG -   - Chave 'papel_e_celulose': 3 sinônimos.
2025-04-21 15:58:19,412 - PLN_Processor - DEBUG -   - Chave 'petroleo_gas_e_biocombustivel': 11 sinônimos.
2025-04-21 15:58:19,412 - PLN_Processor - DEBUG -   - Chave 'petroquimicos': 4 sinônimos.
2025-04-21 15:58:19,413 - PLN_Processor - DEBUG -   - Chave 'preferencial': 4 sinônimos.
2025-04-21 15:58:19,413 - PLN_Processor - DEBUG -   - Chave 'pregao': 7 sinônimos.
2025-04-21 15:58:19,414 - PLN_Processor - DEBUG -   - Chave 'previdencia_e_seguros': 1 sinônimos.
2025-04-21 15:58:19,414 - PLN_Processor - DEBUG -   - Chave 'producao_de_eventos_e_shows': 7 sinônimos.
2025-04-21 15:58:19,414 - PLN_Processor - DEBUG -   - Chave 'produtos_diversos': 10 sinônimos.
2025-04-21 15:58:19,415 - PLN_Processor - DEBUG -   - Chave 'produtos_de_limpeza': 5 sinônimos.
2025-04-21 15:58:19,415 - PLN_Processor - DEBUG -   - Chave 'produtos_de_uso_pessoal': 7 sinônimos.
2025-04-21 15:58:19,415 - PLN_Processor - DEBUG -   - Chave 'produtos_de_uso_pessoal_e_de_limpeza': 1 sinônimos.
2025-04-21 15:58:19,416 - PLN_Processor - DEBUG -   - Chave 'produtos_para_construcao': 4 sinônimos.
2025-04-21 15:58:19,416 - PLN_Processor - DEBUG -   - Chave 'programas_de_fidelizacao': 11 sinônimos.
2025-04-21 15:58:19,416 - PLN_Processor - DEBUG -   - Chave 'programas_e_servicos': 4 sinônimos.
2025-04-21 15:58:19,417 - PLN_Processor - DEBUG -   - Chave 'publicidade_e_propaganda': 4 sinônimos.
2025-04-21 15:58:19,417 - PLN_Processor - DEBUG -   - Chave 'quimico': 1 sinônimos.
2025-04-21 15:58:19,417 - PLN_Processor - DEBUG -   - Chave 'quimicos_diversos': 4 sinônimos.
2025-04-21 15:58:19,417 - PLN_Processor - DEBUG -   - Chave 'resseguradoras': 5 sinônimos.
2025-04-21 15:58:19,418 - PLN_Processor - DEBUG -   - Chave 'restaurante_e_similares': 3 sinônimos.
2025-04-21 15:58:19,418 - PLN_Processor - DEBUG -   - Chave 'rodoviario': 6 sinônimos.
2025-04-21 15:58:19,418 - PLN_Processor - DEBUG -   - Chave 'saude': 3 sinônimos.
2025-04-21 15:58:19,418 - PLN_Processor - DEBUG -   - Chave 'securitizadoras_de_recebiveis': 4 sinônimos.
2025-04-21 15:58:19,418 - PLN_Processor - DEBUG -   - Chave 'seguradoras': 4 sinônimos.
2025-04-21 15:58:19,419 - PLN_Processor - DEBUG -   - Chave 'servicos': 1 sinônimos.
2025-04-21 15:58:19,419 - PLN_Processor - DEBUG -   - Chave 'servicos_diversos': 4 sinônimos.
2025-04-21 15:58:19,419 - PLN_Processor - DEBUG -   - Chave 'servicos_educacionais': 7 sinônimos.
2025-04-21 15:58:19,419 - PLN_Processor - DEBUG -   - Chave 'servicos_financeiros_diversos': 6 sinônimos.
2025-04-21 15:58:19,419 - PLN_Processor - DEBUG -   - Chave 'servicos_medicos_hospitalares_diagnosticos': 9 sinônimos.
2025-04-21 15:58:19,419 - PLN_Processor - DEBUG -   - Chave 'servicos_de_apoio_e_armazenagem': 7 sinônimos.
2025-04-21 15:58:19,420 - PLN_Processor - DEBUG -   - Chave 'setor_atuacao': 7 sinônimos.
2025-04-21 15:58:19,420 - PLN_Processor - DEBUG -   - Chave 'siderurgia': 5 sinônimos.
2025-04-21 15:58:19,420 - PLN_Processor - DEBUG -   - Chave 'siderurgia_e_metalurgia': 1 sinônimos.
2025-04-21 15:58:19,420 - PLN_Processor - DEBUG -   - Chave 'sociedade_de_arrendamento_mercantil': 5 sinônimos.
2025-04-21 15:58:19,420 - PLN_Processor - DEBUG -   - Chave 'sociedade_de_credito_e_financiamento': 6 sinônimos.
2025-04-21 15:58:19,420 - PLN_Processor - DEBUG -   - Chave 'tecidos_vestuario_calcados': 8 sinônimos.
2025-04-21 15:58:19,421 - PLN_Processor - DEBUG -   - Chave 'tecnologia_da_informacao': 5 sinônimos.
2025-04-21 15:58:19,421 - PLN_Processor - DEBUG -   - Chave 'telecomunicacoes': 5 sinônimos.
2025-04-21 15:58:19,421 - PLN_Processor - DEBUG -   - Chave 'transporte': 1 sinônimos.
2025-04-21 15:58:19,421 - PLN_Processor - DEBUG -   - Chave 'utensilios_domesticos': 6 sinônimos.
2025-04-21 15:58:19,421 - PLN_Processor - DEBUG -   - Chave 'utilidade_publica': 4 sinônimos.
2025-04-21 15:58:19,421 - PLN_Processor - DEBUG -   - Chave 'valor_mobiliario': 5 sinônimos.
2025-04-21 15:58:19,422 - PLN_Processor - DEBUG -   - Chave 'valor_mobiliario_negociado': 5 sinônimos.
2025-04-21 15:58:19,422 - PLN_Processor - DEBUG -   - Chave 'vestuario': 7 sinônimos.
2025-04-21 15:58:19,422 - PLN_Processor - DEBUG -   - Chave 'viagens_e_lazer': 5 sinônimos.
2025-04-21 15:58:19,422 - PLN_Processor - DEBUG -   - Chave 'precoabertura': 2 sinônimos.
2025-04-21 15:58:19,422 - PLN_Processor - DEBUG -   - Chave 'precofechamento': 5 sinônimos.
2025-04-21 15:58:19,423 - PLN_Processor - DEBUG -   - Chave 'precomedio': 3 sinônimos.
2025-04-21 15:58:19,423 - PLN_Processor - DEBUG -   - Chave 'precomaximo': 4 sinônimos.
2025-04-21 15:58:19,423 - PLN_Processor - DEBUG -   - Chave 'precominimo': 4 sinônimos.
2025-04-21 15:58:19,423 - PLN_Processor - DEBUG -   - Chave 'totalnegocios': 4 sinônimos.
2025-04-21 15:58:19,423 - PLN_Processor - DEBUG -   - Chave 'volumetotalnegociado': 5 sinônimos.
2025-04-21 15:58:19,423 - PLN_Processor - DEBUG -   - Chave 'quantidadepapeisnegociados': 6 sinônimos.
2025-04-21 15:58:19,424 - PLN_Processor - DEBUG -   - Chave 'variacaointradiariaabsoluta': 4 sinônimos.
2025-04-21 15:58:19,424 - PLN_Processor - DEBUG -   - Chave 'variacaopercentual': 7 sinônimos.
2025-04-21 15:58:19,424 - PLN_Processor - DEBUG -   - Chave 'intervalointradiariopercentual': 3 sinônimos.
2025-04-21 15:58:19,424 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado: 149 chaves.
2025-04-21 15:58:19,424 - PLN_Processor - INFO - Configs carregadas.
2025-04-21 15:58:19,424 - PLN_Processor - INFO - Processando NLP...
2025-04-21 15:58:19,425 - PLN_Processor - DEBUG - Extraindo spaCy de: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-04-21 15:58:19,442 - PLN_Processor - DEBUG -   - Análise de dependências SPO...
2025-04-21 15:58:19,442 - PLN_Processor - DEBUG -     - Suj (nsubj): 'o preço de fechamento da ação da CSN'
2025-04-21 15:58:19,443 - PLN_Processor - DEBUG -     - Obj/Obl (obl): 'em 08/05/2023'
2025-04-21 15:58:19,443 - PLN_Processor - DEBUG -   - Extração NER...
2025-04-21 15:58:19,443 - PLN_Processor - DEBUG -     - NER: 'CSN' (ORG)
2025-04-21 15:58:19,443 - PLN_Processor - INFO - Extração spaCy final. SPO: {'sujeito': ['o preço de fechamento da ação da CSN'], 'predicado': [], 'objeto': ['em 08/05/2023']}, NER: {'ORG': ['CSN']}
2025-04-21 15:58:19,444 - PLN_Processor - DEBUG - Extraindo data de: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-04-21 15:58:19,445 - PLN_Processor - INFO - Data '08/05/2023' -> 2023-05-08
2025-04-21 15:58:19,445 - PLN_Processor - INFO - NLP concluído.
2025-04-21 15:58:19,445 - PLN_Processor - INFO - Buscando template...
2025-04-21 15:58:19,446 - PLN_Processor - DEBUG - Buscando template para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar: 0.65)
2025-04-21 15:58:19,446 - PLN_Processor - DEBUG -     -> 'Template 1A', Sim: 1.0000
2025-04-21 15:58:19,446 - PLN_Processor - DEBUG -       >> NOVA MAIOR SIM! <<
2025-04-21 15:58:19,447 - PLN_Processor - DEBUG -     -> 'Template 1B', Sim: 0.7358
2025-04-21 15:58:19,448 - PLN_Processor - DEBUG -     -> 'Template 2A', Sim: 0.5882
2025-04-21 15:58:19,448 - PLN_Processor - DEBUG -     -> 'Template 3A', Sim: 0.3226
2025-04-21 15:58:19,450 - PLN_Processor - DEBUG -     -> 'Template 4A', Sim: 0.5484
2025-04-21 15:58:19,450 - PLN_Processor - DEBUG -     -> 'Template 4B', Sim: 0.4062
2025-04-21 15:58:19,451 - PLN_Processor - DEBUG -     -> 'Template 5A', Sim: 0.8148
2025-04-21 15:58:19,452 - PLN_Processor - DEBUG -     -> 'Template 5B', Sim: 0.6612
2025-04-21 15:58:19,453 - PLN_Processor - DEBUG -     -> 'Template 5C', Sim: 0.7333
2025-04-21 15:58:19,453 - PLN_Processor - DEBUG -     -> 'Template 6A', Sim: 0.5970
2025-04-21 15:58:19,454 - PLN_Processor - DEBUG -     -> 'Template 7A', Sim: 0.3537
2025-04-21 15:58:19,455 - PLN_Processor - DEBUG -     -> 'Template 7B', Sim: 0.3688
2025-04-21 15:58:19,456 - PLN_Processor - DEBUG -     -> 'Template 7C', Sim: 0.3704
2025-04-21 15:58:19,458 - PLN_Processor - DEBUG -     -> 'Template 7D', Sim: 0.4463
2025-04-21 15:58:19,458 - PLN_Processor - DEBUG -     -> 'Template 7E', Sim: 0.3780
2025-04-21 15:58:19,459 - PLN_Processor - DEBUG -     -> 'Template 7F', Sim: 0.3906
2025-04-21 15:58:19,460 - PLN_Processor - DEBUG -     -> 'Template 8A', Sim: 0.4588
2025-04-21 15:58:19,461 - PLN_Processor - DEBUG -     -> 'Template 8B', Sim: 0.4973
2025-04-21 15:58:19,461 - PLN_Processor - INFO - Template similar: Nome='Template 1A', Sim=1.0000
2025-04-21 15:58:19,462 - PLN_Processor - INFO - Template 'Template 1A' selecionado (Sim: 1.0000).
2025-04-21 15:58:19,462 - PLN_Processor - INFO - Mapeando placeholders semânticos...
2025-04-21 15:58:19,462 - PLN_Processor - DEBUG - Iniciando mapeamento semântico...
2025-04-21 15:58:19,462 - PLN_Processor - DEBUG -   - Map #DATA: 2023-05-08
2025-04-21 15:58:19,462 - PLN_Processor - DEBUG -   - #ENT via NER ORG (Genérico): 'CSN'
2025-04-21 15:58:19,463 - PLN_Processor - INFO -   - Map #ENTIDADE: 'CSN' (NER ORG (Genérico))
2025-04-21 15:58:19,469 - PLN_Processor - DEBUG -   - Texto candidato #VALOR_DESEJADO: 'preço de fechamento da ação'
2025-04-21 15:58:19,470 - PLN_Processor - DEBUG - Recebido para buscar termo: 'preço de fechamento da ação'
2025-04-21 15:58:19,470 - PLN_Processor - DEBUG - Buscando termo no dicionário para frase normalizada: 'preco de fechamento da acao' (Limiar: 0.75)
2025-04-21 15:58:19,612 - PLN_Processor - DEBUG -     -> Novo melhor (de sinônimo 'preco de fechamento'): Chave='precofechamento' Similaridade=0.8261
2025-04-21 15:58:19,621 - PLN_Processor - INFO - Melhor termo encontrado para 'preço de fechamento da ação': Chave='precofechamento' (Match 'preco de fechamento', Sim: 0.83)
2025-04-21 15:58:19,621 - PLN_Processor - INFO -   - Map #VALOR_DESEJADO: 'precofechamento' (de 'preço de fechamento da ação')
2025-04-21 15:58:19,622 - PLN_Processor - DEBUG -   - Texto norm para tipo ação: 'qual foi o preco de fechamento da acao da csn em 08052023'
2025-04-21 15:58:19,623 - PLN_Processor - DEBUG -   - Nenhum #TIPO_ACAO explícito.
2025-04-21 15:58:19,623 - PLN_Processor - DEBUG -   - Nenhum #SETOR explícito.
2025-04-21 15:58:19,623 - PLN_Processor - INFO - Mapeamentos semânticos finais: {'#DATA': '2023-05-08', '#ENTIDADE': 'CSN', '#VALOR_DESEJADO': 'precofechamento'}
2025-04-21 15:58:19,624 - PLN_Processor - INFO - Mapeamento concluído.
2025-04-21 15:58:19,624 - PLN_Processor - INFO - Validando placeholders...
2025-04-21 15:58:19,624 - PLN_Processor - INFO - Validação OK para 'Template 1A'.
2025-04-21 15:58:19,624 - PLN_Processor - INFO - Construindo JSON de resposta...
2025-04-21 15:58:19,624 - PLN_Processor - DEBUG - JSON final para stdout: {"template_nome": "Template 1A", "mapeamentos": {"#DATA": "2023-05-08", "#ENTIDADE": "CSN", "#VALOR_DESEJADO": "precofechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "elementos_extraidos_nlp": {"sujeito": ["o preço de fechamento da ação da CSN"], "predicado": [], "objeto": ["em 08/05/2023"]}, "entidades_nomeadas_nlp": {"ORG": ["CSN"]}, "data_extraida_nlp": "2023-05-08", "similaridade_template": 1.0, "linha_template_correspondente": "Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "placeholders_requeridos_verificados": ["#DATA", "#ENTIDADE", "#VALOR_DESEJADO"], "placeholders_faltando_verificados": []}}
2025-04-21 15:58:19,625 - PLN_Processor - INFO - Enviando resposta para stdout...
2025-04-21 16:05:31,429 - PLN_Processor - CRITICAL - Erro CRÍTICO ao imprimir para stdout: [Errno 22] Invalid argument
Traceback (most recent call last):
  File "C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.py", line 464, in <module>
    try: print(json_output_string); sys.stdout.flush()
                                    ^^^^^^^^^^^^^^^^^^
OSError: [Errno 22] Invalid argument
=======
2025-04-06 12:27:20,679 - PLN_Processor - INFO - Pacotes NLTK verificados/baixados.
2025-04-06 12:27:22,299 - PLN_Processor - INFO - Modelo spaCy 'pt_core_news_sm' carregado.
2025-04-06 12:27:22,300 - PLN_Processor - DEBUG - Caminho Dicionário Sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-04-06 12:27:22,300 - PLN_Processor - DEBUG - Caminho Perguntas Interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-04-06 12:27:22,300 - PLN_Processor - INFO - --- ================================= ---
2025-04-06 12:27:22,301 - PLN_Processor - INFO - --- Iniciando processamento PLN (PID: 1536) ---
2025-04-06 12:27:22,301 - PLN_Processor - INFO - --- Argumentos: ['pln_processor.py', 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'] ---
2025-04-06 12:27:22,302 - PLN_Processor - INFO - Pergunta recebida (argv): 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-04-06 12:27:22,302 - PLN_Processor - DEBUG - Tentando carregar arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-04-06 12:27:22,303 - PLN_Processor - INFO - Arquivo C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt lido com encoding: utf-8
2025-04-06 12:27:22,304 - PLN_Processor - DEBUG - Carregadas 18 linhas de C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-04-06 12:27:22,304 - PLN_Processor - DEBUG - Tentando carregar arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-04-06 12:27:22,305 - PLN_Processor - INFO - Arquivo C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt lido com encoding: utf-8
2025-04-06 12:27:22,305 - PLN_Processor - DEBUG - Carregadas 156 linhas de C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-04-06 12:27:22,306 - PLN_Processor - DEBUG - Carregada chave 'acao' com 5 sinônimos.
2025-04-06 12:27:22,306 - PLN_Processor - DEBUG - Carregada chave 'acessorios' com 9 sinônimos.
2025-04-06 12:27:22,307 - PLN_Processor - DEBUG - Carregada chave 'acucar_e_alcool' com 7 sinônimos.
2025-04-06 12:27:22,307 - PLN_Processor - DEBUG - Carregada chave 'aereo' com 6 sinônimos.
2025-04-06 12:27:22,307 - PLN_Processor - DEBUG - Carregada chave 'agricultura' com 7 sinônimos.
2025-04-06 12:27:22,307 - PLN_Processor - DEBUG - Carregada chave 'agropecuaria' com 9 sinônimos.
2025-04-06 12:27:22,307 - PLN_Processor - DEBUG - Carregada chave 'agua_e_saneamento' com 5 sinônimos.
2025-04-06 12:27:22,307 - PLN_Processor - DEBUG - Carregada chave 'alimentos' com 5 sinônimos.
2025-04-06 12:27:22,308 - PLN_Processor - DEBUG - Carregada chave 'alimentos_diversos' com 10 sinônimos.
2025-04-06 12:27:22,308 - PLN_Processor - DEBUG - Carregada chave 'alimentos_processados' com 2 sinônimos.
2025-04-06 12:27:22,308 - PLN_Processor - DEBUG - Carregada chave 'aluguel_de_carros' com 4 sinônimos.
2025-04-06 12:27:22,308 - PLN_Processor - DEBUG - Carregada chave 'armas_e_municoes' com 4 sinônimos.
2025-04-06 12:27:22,308 - PLN_Processor - DEBUG - Carregada chave 'artefatos_de_cobre' com 3 sinônimos.
2025-04-06 12:27:22,308 - PLN_Processor - DEBUG - Carregada chave 'artefatos_de_ferro_e_aco' com 2 sinônimos.
2025-04-06 12:27:22,308 - PLN_Processor - DEBUG - Carregada chave 'atividades_esportivas' com 3 sinônimos.
2025-04-06 12:27:22,309 - PLN_Processor - DEBUG - Carregada chave 'automoveis_e_motocicletas' com 4 sinônimos.
2025-04-06 12:27:22,309 - PLN_Processor - DEBUG - Carregada chave 'bancos' com 4 sinônimos.
2025-04-06 12:27:22,309 - PLN_Processor - DEBUG - Carregada chave 'bebidas' com 1 sinônimos.
2025-04-06 12:27:22,309 - PLN_Processor - DEBUG - Carregada chave 'bens_industriais' com 3 sinônimos.
2025-04-06 12:27:22,309 - PLN_Processor - DEBUG - Carregada chave 'bicicletas' com 4 sinônimos.
2025-04-06 12:27:22,309 - PLN_Processor - DEBUG - Carregada chave 'bolsa_de_valores' com 5 sinônimos.
2025-04-06 12:27:22,310 - PLN_Processor - DEBUG - Carregada chave 'brazilian_depositary_receipt' com 3 sinônimos.
2025-04-06 12:27:22,310 - PLN_Processor - DEBUG - Carregada chave 'brinquedos_e_jogos' com 3 sinônimos.
2025-04-06 12:27:22,310 - PLN_Processor - DEBUG - Carregada chave 'calcados' com 8 sinônimos.
2025-04-06 12:27:22,310 - PLN_Processor - DEBUG - Carregada chave 'carnes_e_derivados' com 5 sinônimos.
2025-04-06 12:27:22,310 - PLN_Processor - DEBUG - Carregada chave 'certificado_de_deposito_de_acoes' com 3 sinônimos.
2025-04-06 12:27:22,310 - PLN_Processor - DEBUG - Carregada chave 'cervejas_e_refrigerantes' com 9 sinônimos.
2025-04-06 12:27:22,310 - PLN_Processor - DEBUG - Carregada chave 'classe_a' com 1 sinônimos.
2025-04-06 12:27:22,311 - PLN_Processor - DEBUG - Carregada chave 'classe_b' com 1 sinônimos.
2025-04-06 12:27:22,311 - PLN_Processor - DEBUG - Carregada chave 'codigo' com 4 sinônimos.
2025-04-06 12:27:22,311 - PLN_Processor - DEBUG - Carregada chave 'codigo_negociacao' com 4 sinônimos.
2025-04-06 12:27:22,311 - PLN_Processor - DEBUG - Carregada chave 'comercio' com 3 sinônimos.
2025-04-06 12:27:22,311 - PLN_Processor - DEBUG - Carregada chave 'comercio_de_eletrodomesticos' com 4 sinônimos.
2025-04-06 12:27:22,311 - PLN_Processor - DEBUG - Carregada chave 'comercio_de_materiais_de_transporte' com 7 sinônimos.
2025-04-06 12:27:22,311 - PLN_Processor - DEBUG - Carregada chave 'comercio_e_distribuicao' com 1 sinônimos.
2025-04-06 12:27:22,312 - PLN_Processor - DEBUG - Carregada chave 'comercio_e_distribuicao_de_medicamentos_e_outros_produtos' com 5 sinônimos.
2025-04-06 12:27:22,312 - PLN_Processor - DEBUG - Carregada chave 'computadores_e_equipamentos' com 3 sinônimos.
2025-04-06 12:27:22,312 - PLN_Processor - DEBUG - Carregada chave 'comunicacoes' com 4 sinônimos.
2025-04-06 12:27:22,312 - PLN_Processor - DEBUG - Carregada chave 'construcao_civil' com 1 sinônimos.
2025-04-06 12:27:22,312 - PLN_Processor - DEBUG - Carregada chave 'construcao_pesada' com 2 sinônimos.
2025-04-06 12:27:22,312 - PLN_Processor - DEBUG - Carregada chave 'construcao_e_agricolas' com 3 sinônimos.
2025-04-06 12:27:22,312 - PLN_Processor - DEBUG - Carregada chave 'construcao_e_engenharia' com 1 sinônimos.
2025-04-06 12:27:22,313 - PLN_Processor - DEBUG - Carregada chave 'consumo_ciclico' com 4 sinônimos.
2025-04-06 12:27:22,313 - PLN_Processor - DEBUG - Carregada chave 'consumo_nao_ciclico' com 7 sinônimos.
2025-04-06 12:27:22,313 - PLN_Processor - DEBUG - Carregada chave 'corretoras_de_seguros_e_resseguros' com 8 sinônimos.
2025-04-06 12:27:22,313 - PLN_Processor - DEBUG - Carregada chave 'debenture' com 4 sinônimos.
2025-04-06 12:27:22,313 - PLN_Processor - DEBUG - Carregada chave 'diversos' com 1 sinônimos.
2025-04-06 12:27:22,313 - PLN_Processor - DEBUG - Carregada chave 'eletrodomesticos' com 4 sinônimos.
2025-04-06 12:27:22,313 - PLN_Processor - DEBUG - Carregada chave 'embalagens' com 6 sinônimos.
2025-04-06 12:27:22,314 - PLN_Processor - DEBUG - Carregada chave 'empresa' com 5 sinônimos.
2025-04-06 12:27:22,314 - PLN_Processor - DEBUG - Carregada chave 'empresa_capital_aberto' com 5 sinônimos.
2025-04-06 12:27:22,314 - PLN_Processor - DEBUG - Carregada chave 'energia_eletrica' com 7 sinônimos.
2025-04-06 12:27:22,314 - PLN_Processor - DEBUG - Carregada chave 'engenharia_consultiva' com 3 sinônimos.
2025-04-06 12:27:22,314 - PLN_Processor - DEBUG - Carregada chave 'equipamentos' com 7 sinônimos.
2025-04-06 12:27:22,314 - PLN_Processor - DEBUG - Carregada chave 'equipamentos_e_servicos' com 5 sinônimos.
2025-04-06 12:27:22,314 - PLN_Processor - DEBUG - Carregada chave 'exploracao_refino_e_distribuicao' com 7 sinônimos.
2025-04-06 12:27:22,315 - PLN_Processor - DEBUG - Carregada chave 'exploracao_de_imoveis' com 12 sinônimos.
2025-04-06 12:27:22,315 - PLN_Processor - DEBUG - Carregada chave 'exploracao_de_rodovias' com 3 sinônimos.
2025-04-06 12:27:22,315 - PLN_Processor - DEBUG - Carregada chave 'ferroviario' com 7 sinônimos.
2025-04-06 12:27:22,315 - PLN_Processor - DEBUG - Carregada chave 'fertilizantes_e_defensivos' com 5 sinônimos.
2025-04-06 12:27:22,315 - PLN_Processor - DEBUG - Carregada chave 'financeiro' com 6 sinônimos.
2025-04-06 12:27:22,315 - PLN_Processor - DEBUG - Carregada chave 'fios_e_tecidos' com 7 sinônimos.
2025-04-06 12:27:22,316 - PLN_Processor - DEBUG - Carregada chave 'gas' com 3 sinônimos.
2025-04-06 12:27:22,316 - PLN_Processor - DEBUG - Carregada chave 'gestao_de_recursos_e_investimentos' com 3 sinônimos.
2025-04-06 12:27:22,316 - PLN_Processor - DEBUG - Carregada chave 'hidroviario' com 7 sinônimos.
2025-04-06 12:27:22,316 - PLN_Processor - DEBUG - Carregada chave 'holdings_diversificadas' com 3 sinônimos.
2025-04-06 12:27:22,316 - PLN_Processor - DEBUG - Carregada chave 'hoteis_e_restaurantes' com 1 sinônimos.
2025-04-06 12:27:22,316 - PLN_Processor - DEBUG - Carregada chave 'hotelaria' com 5 sinônimos.
2025-04-06 12:27:22,316 - PLN_Processor - DEBUG - Carregada chave 'incorporacoes' com 4 sinônimos.
2025-04-06 12:27:22,317 - PLN_Processor - DEBUG - Carregada chave 'indice' com 4 sinônimos.
2025-04-06 12:27:22,317 - PLN_Processor - DEBUG - Carregada chave 'indice_amplo' com 4 sinônimos.
2025-04-06 12:27:22,317 - PLN_Processor - DEBUG - Carregada chave 'indice_setorial' com 4 sinônimos.
2025-04-06 12:27:22,317 - PLN_Processor - DEBUG - Carregada chave 'industriais' com 10 sinônimos.
2025-04-06 12:27:22,317 - PLN_Processor - DEBUG - Carregada chave 'intermediacao_imobiliaria' com 9 sinônimos.
2025-04-06 12:27:22,317 - PLN_Processor - DEBUG - Carregada chave 'intermediarios_financeiros' com 4 sinônimos.
2025-04-06 12:27:22,317 - PLN_Processor - DEBUG - Carregada chave 'laticinios' com 5 sinônimos.
2025-04-06 12:27:22,318 - PLN_Processor - DEBUG - Carregada chave 'madeira' com 8 sinônimos.
2025-04-06 12:27:22,318 - PLN_Processor - DEBUG - Carregada chave 'madeira_e_papel' com 1 sinônimos.
2025-04-06 12:27:22,318 - PLN_Processor - DEBUG - Carregada chave 'maquinas_e_equipamentos' com 1 sinônimos.
2025-04-06 12:27:22,318 - PLN_Processor - DEBUG - Carregada chave 'materiais_basicos' com 5 sinônimos.
2025-04-06 12:27:22,319 - PLN_Processor - DEBUG - Carregada chave 'materiais_diversos' com 5 sinônimos.
2025-04-06 12:27:22,319 - PLN_Processor - DEBUG - Carregada chave 'material_aeronautico_e_de_defesa' com 5 sinônimos.
2025-04-06 12:27:22,319 - PLN_Processor - DEBUG - Carregada chave 'material_rodoviario' com 8 sinônimos.
2025-04-06 12:27:22,319 - PLN_Processor - DEBUG - Carregada chave 'material_de_transporte' com 1 sinônimos.
2025-04-06 12:27:22,319 - PLN_Processor - DEBUG - Carregada chave 'medicamentos_e_outros_produtos' com 6 sinônimos.
2025-04-06 12:27:22,319 - PLN_Processor - DEBUG - Carregada chave 'midia' com 1 sinônimos.
2025-04-06 12:27:22,320 - PLN_Processor - DEBUG - Carregada chave 'mineracao' com 2 sinônimos.
2025-04-06 12:27:22,320 - PLN_Processor - DEBUG - Carregada chave 'minerais_metalicos' com 9 sinônimos.
2025-04-06 12:27:22,320 - PLN_Processor - DEBUG - Carregada chave 'motores_compressores_e_outros' com 9 sinônimos.
2025-04-06 12:27:22,320 - PLN_Processor - DEBUG - Carregada chave 'moveis' com 4 sinônimos.
2025-04-06 12:27:22,320 - PLN_Processor - DEBUG - Carregada chave 'negociado_em_diferentes_pregoes' com 1 sinônimos.
2025-04-06 12:27:22,320 - PLN_Processor - DEBUG - Carregada chave 'negociado_em_pregao' com 1 sinônimos.
2025-04-06 12:27:22,320 - PLN_Processor - DEBUG - Carregada chave 'ordinaria' com 4 sinônimos.
2025-04-06 12:27:22,321 - PLN_Processor - DEBUG - Carregada chave 'outros' com 4 sinônimos.
2025-04-06 12:27:22,321 - PLN_Processor - DEBUG - Carregada chave 'papel_e_celulose' com 3 sinônimos.
2025-04-06 12:27:22,321 - PLN_Processor - DEBUG - Carregada chave 'petroleo_gas_e_biocombustivel' com 11 sinônimos.
2025-04-06 12:27:22,322 - PLN_Processor - DEBUG - Carregada chave 'petroquimicos' com 4 sinônimos.
2025-04-06 12:27:22,322 - PLN_Processor - DEBUG - Carregada chave 'preferencial' com 4 sinônimos.
2025-04-06 12:27:22,322 - PLN_Processor - DEBUG - Carregada chave 'pregao' com 7 sinônimos.
2025-04-06 12:27:22,322 - PLN_Processor - DEBUG - Carregada chave 'previdencia_e_seguros' com 1 sinônimos.
2025-04-06 12:27:22,323 - PLN_Processor - DEBUG - Carregada chave 'producao_de_eventos_e_shows' com 7 sinônimos.
2025-04-06 12:27:22,323 - PLN_Processor - DEBUG - Carregada chave 'produtos_diversos' com 10 sinônimos.
2025-04-06 12:27:22,323 - PLN_Processor - DEBUG - Carregada chave 'produtos_de_limpeza' com 5 sinônimos.
2025-04-06 12:27:22,323 - PLN_Processor - DEBUG - Carregada chave 'produtos_de_uso_pessoal' com 7 sinônimos.
2025-04-06 12:27:22,323 - PLN_Processor - DEBUG - Carregada chave 'produtos_de_uso_pessoal_e_de_limpeza' com 1 sinônimos.
2025-04-06 12:27:22,323 - PLN_Processor - DEBUG - Carregada chave 'produtos_para_construcao' com 4 sinônimos.
2025-04-06 12:27:22,324 - PLN_Processor - DEBUG - Carregada chave 'programas_de_fidelizacao' com 11 sinônimos.
2025-04-06 12:27:22,324 - PLN_Processor - DEBUG - Carregada chave 'programas_e_servicos' com 4 sinônimos.
2025-04-06 12:27:22,324 - PLN_Processor - DEBUG - Carregada chave 'publicidade_e_propaganda' com 4 sinônimos.
2025-04-06 12:27:22,324 - PLN_Processor - DEBUG - Carregada chave 'quimico' com 1 sinônimos.
2025-04-06 12:27:22,324 - PLN_Processor - DEBUG - Carregada chave 'quimicos_diversos' com 4 sinônimos.
2025-04-06 12:27:22,324 - PLN_Processor - DEBUG - Carregada chave 'resseguradoras' com 5 sinônimos.
2025-04-06 12:27:22,324 - PLN_Processor - DEBUG - Carregada chave 'restaurante_e_similares' com 3 sinônimos.
2025-04-06 12:27:22,325 - PLN_Processor - DEBUG - Carregada chave 'rodoviario' com 6 sinônimos.
2025-04-06 12:27:22,325 - PLN_Processor - DEBUG - Carregada chave 'saude' com 3 sinônimos.
2025-04-06 12:27:22,325 - PLN_Processor - DEBUG - Carregada chave 'securitizadoras_de_recebiveis' com 4 sinônimos.
2025-04-06 12:27:22,325 - PLN_Processor - DEBUG - Carregada chave 'seguradoras' com 4 sinônimos.
2025-04-06 12:27:22,325 - PLN_Processor - DEBUG - Carregada chave 'servicos' com 1 sinônimos.
2025-04-06 12:27:22,325 - PLN_Processor - DEBUG - Carregada chave 'servicos_diversos' com 4 sinônimos.
2025-04-06 12:27:22,325 - PLN_Processor - DEBUG - Carregada chave 'servicos_educacionais' com 7 sinônimos.
2025-04-06 12:27:22,326 - PLN_Processor - DEBUG - Carregada chave 'servicos_financeiros_diversos' com 6 sinônimos.
2025-04-06 12:27:22,326 - PLN_Processor - DEBUG - Carregada chave 'servicos_medicos_hospitalares_diagnosticos' com 9 sinônimos.
2025-04-06 12:27:22,326 - PLN_Processor - DEBUG - Carregada chave 'servicos_de_apoio_e_armazenagem' com 7 sinônimos.
2025-04-06 12:27:22,326 - PLN_Processor - DEBUG - Carregada chave 'setor_atuacao' com 7 sinônimos.
2025-04-06 12:27:22,326 - PLN_Processor - DEBUG - Carregada chave 'siderurgia' com 5 sinônimos.
2025-04-06 12:27:22,326 - PLN_Processor - DEBUG - Carregada chave 'siderurgia_e_metalurgia' com 1 sinônimos.
2025-04-06 12:27:22,326 - PLN_Processor - DEBUG - Carregada chave 'sociedade_de_arrendamento_mercantil' com 5 sinônimos.
2025-04-06 12:27:22,327 - PLN_Processor - DEBUG - Carregada chave 'sociedade_de_credito_e_financiamento' com 6 sinônimos.
2025-04-06 12:27:22,327 - PLN_Processor - DEBUG - Carregada chave 'tecidos_vestuario_calcados' com 8 sinônimos.
2025-04-06 12:27:22,327 - PLN_Processor - DEBUG - Carregada chave 'tecnologia_da_informacao' com 5 sinônimos.
2025-04-06 12:27:22,327 - PLN_Processor - DEBUG - Carregada chave 'telecomunicacoes' com 5 sinônimos.
2025-04-06 12:27:22,327 - PLN_Processor - DEBUG - Carregada chave 'transporte' com 1 sinônimos.
2025-04-06 12:27:22,327 - PLN_Processor - DEBUG - Carregada chave 'utensilios_domesticos' com 6 sinônimos.
2025-04-06 12:27:22,327 - PLN_Processor - DEBUG - Carregada chave 'utilidade_publica' com 4 sinônimos.
2025-04-06 12:27:22,328 - PLN_Processor - DEBUG - Carregada chave 'valor_mobiliario' com 5 sinônimos.
2025-04-06 12:27:22,328 - PLN_Processor - DEBUG - Carregada chave 'valor_mobiliario_negociado' com 5 sinônimos.
2025-04-06 12:27:22,328 - PLN_Processor - DEBUG - Carregada chave 'vestuario' com 7 sinônimos.
2025-04-06 12:27:22,328 - PLN_Processor - DEBUG - Carregada chave 'viagens_e_lazer' com 5 sinônimos.
2025-04-06 12:27:22,328 - PLN_Processor - DEBUG - Carregada chave 'precoabertura' com 2 sinônimos.
2025-04-06 12:27:22,328 - PLN_Processor - DEBUG - Carregada chave 'precofechamento' com 5 sinônimos.
2025-04-06 12:27:22,329 - PLN_Processor - DEBUG - Carregada chave 'precomedio' com 3 sinônimos.
2025-04-06 12:27:22,329 - PLN_Processor - DEBUG - Carregada chave 'precomaximo' com 4 sinônimos.
2025-04-06 12:27:22,329 - PLN_Processor - DEBUG - Carregada chave 'precominimo' com 4 sinônimos.
2025-04-06 12:27:22,329 - PLN_Processor - DEBUG - Carregada chave 'totalnegocios' com 4 sinônimos.
2025-04-06 12:27:22,329 - PLN_Processor - DEBUG - Carregada chave 'volumetotalnegociado' com 5 sinônimos.
2025-04-06 12:27:22,329 - PLN_Processor - DEBUG - Carregada chave 'quantidadepapeisnegociados' com 6 sinônimos.
2025-04-06 12:27:22,329 - PLN_Processor - DEBUG - Carregada chave 'variacaointradiariaabsoluta' com 4 sinônimos.
2025-04-06 12:27:22,330 - PLN_Processor - DEBUG - Carregada chave 'variacaopercentual' com 7 sinônimos.
2025-04-06 12:27:22,330 - PLN_Processor - DEBUG - Carregada chave 'intervalointradiariopercentual' com 3 sinônimos.
2025-04-06 12:27:22,330 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado: 149 chaves.
2025-04-06 12:27:22,330 - PLN_Processor - DEBUG - Iniciando extração spaCy para: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-04-06 12:27:22,347 - PLN_Processor - DEBUG -   - Sujeito (nsubj): 'o preço de abertura da CBAV3 em 08/05/2023' (Token: preço)
2025-04-06 12:27:22,348 - PLN_Processor - DEBUG -   - NER: 'CBAV3' (Label: ORG)
2025-04-06 12:27:22,348 - PLN_Processor - INFO - Extração spaCy concluída. SPO: {'sujeito': ['o preço de abertura da CBAV3 em 08/05/2023'], 'predicado': [], 'objeto': []}, NER: {'ORG': ['CBAV3']}
2025-04-06 12:27:22,348 - PLN_Processor - DEBUG - Tentando extrair data de: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-04-06 12:27:22,349 - PLN_Processor - INFO - Data explícita '08/05/2023' normalizada para: 2023-05-08
2025-04-06 12:27:22,350 - PLN_Processor - DEBUG - Buscando template para pergunta normalizada: 'qual foi o preco de abertura da cbav3 em 08052023' (Limiar: 0.65)
2025-04-06 12:27:22,350 - PLN_Processor - DEBUG - Comparando com 18 templates.
2025-04-06 12:27:22,350 - PLN_Processor - DEBUG -   Analisando Linha 1: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-04-06 12:27:22,352 - PLN_Processor - DEBUG -     -> Nome: 'Template 1A', Exemplo norm: 'qual foi o preco de fechamento da acao da csn em 08052023', Similaridade: 0.7736
2025-04-06 12:27:22,352 - PLN_Processor - DEBUG -     -> NOVA MAIOR SIMILARIDADE encontrada!
2025-04-06 12:27:22,352 - PLN_Processor - DEBUG -   Analisando Linha 2: 'Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-04-06 12:27:22,353 - PLN_Processor - DEBUG -     -> Nome: 'Template 1B', Exemplo norm: 'qual foi o preco de abertura da cbav3 em 08052023', Similaridade: 1.0000
2025-04-06 12:27:22,353 - PLN_Processor - DEBUG -     -> NOVA MAIOR SIMILARIDADE encontrada!
2025-04-06 12:27:22,353 - PLN_Processor - DEBUG -   Analisando Linha 3: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-04-06 12:27:22,354 - PLN_Processor - DEBUG -     -> Nome: 'Template 2A', Exemplo norm: 'qual o codigo de negociacao da acao da gerdau', Similaridade: 0.4894
2025-04-06 12:27:22,354 - PLN_Processor - DEBUG -   Analisando Linha 4: 'Template 3A - Quais são as ações do setor elétrico?'
2025-04-06 12:27:22,355 - PLN_Processor - DEBUG -     -> Nome: 'Template 3A', Exemplo norm: 'quais sao as acoes do setor eletrico', Similaridade: 0.3294
2025-04-06 12:27:22,355 - PLN_Processor - DEBUG -   Analisando Linha 5: 'Template 4A - Qual foi o volume negociado nas ações do setor bancário em 05/05/2023??'
2025-04-06 12:27:22,356 - PLN_Processor - DEBUG -     -> Nome: 'Template 4A', Exemplo norm: 'qual foi o volume negociado nas acoes do setor bancario em 05052023', Similaridade: 0.5345
2025-04-06 12:27:22,356 - PLN_Processor - DEBUG -   Analisando Linha 6: 'Template 4B - Qual foi a quantidade de ações do Itau negociadas no pregão de 05/05/2023?'
2025-04-06 12:27:22,356 - PLN_Processor - DEBUG -     -> Nome: 'Template 4B', Exemplo norm: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023', Similaridade: 0.4333
2025-04-06 12:27:22,357 - PLN_Processor - DEBUG -   Analisando Linha 7: 'Template 5A - Qual foi o preço mínimo da ação da Vale em 08/05/2023?'
2025-04-06 12:27:22,357 - PLN_Processor - DEBUG -     -> Nome: 'Template 5A', Exemplo norm: 'qual foi o preco minimo da acao da vale em 08052023', Similaridade: 0.7200
2025-04-06 12:27:22,357 - PLN_Processor - DEBUG -   Analisando Linha 8: 'Template 5B - Qual foi o preço mínima da ação preferencial do Itau em 05/05/2023?'
2025-04-06 12:27:22,358 - PLN_Processor - DEBUG -     -> Nome: 'Template 5B', Exemplo norm: 'qual foi o preco minima da acao preferencial do itau em 05052023', Similaridade: 0.6195
2025-04-06 12:27:22,358 - PLN_Processor - DEBUG -   Analisando Linha 9: 'Template 5C - Qual foi o preço máximo da ação ordinária da Gerdau em 08/05/2023?'
2025-04-06 12:27:22,359 - PLN_Processor - DEBUG -     -> Nome: 'Template 5C', Exemplo norm: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023', Similaridade: 0.7143
2025-04-06 12:27:22,359 - PLN_Processor - DEBUG -   Analisando Linha 10: 'Template 6A - Qual foi a variação intradiária absoluta da ação da CSN no pregão de 08/05/2023?'
2025-04-06 12:27:22,359 - PLN_Processor - DEBUG -     -> Nome: 'Template 6A', Exemplo norm: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023', Similaridade: 0.4286
2025-04-06 12:27:22,360 - PLN_Processor - DEBUG -   Analisando Linha 11: 'Template 7A - Qual ação do setor de mineração que teve a maior alta percentual no pregão do dia 08/05/2023?'
2025-04-06 12:27:22,361 - PLN_Processor - DEBUG -     -> Nome: 'Template 7A', Exemplo norm: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023', Similaridade: 0.4029
2025-04-06 12:27:22,361 - PLN_Processor - DEBUG -   Analisando Linha 12: 'Template 7B - Qual ação do setor de bancário que teve a baixa percentual no pregão do dia 08/05/2023?'
2025-04-06 12:27:22,362 - PLN_Processor - DEBUG -     -> Nome: 'Template 7B', Exemplo norm: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023', Similaridade: 0.4211
2025-04-06 12:27:22,362 - PLN_Processor - DEBUG -   Analisando Linha 13: 'Template 7C - Qual ação do setor de consumo não cíclico que a menor variação no dia 08/05/2023?'
2025-04-06 12:27:22,363 - PLN_Processor - DEBUG -     -> Nome: 'Template 7C', Exemplo norm: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023', Similaridade: 0.4252
2025-04-06 12:27:22,363 - PLN_Processor - DEBUG -   Analisando Linha 14: 'Template 7D - Qual a ação com o maior percentual de alta no pregão de 08/05/2023?'
2025-04-06 12:27:22,364 - PLN_Processor - DEBUG -     -> Nome: 'Template 7D', Exemplo norm: 'qual a acao com o maior percentual de alta no pregao de 08052023', Similaridade: 0.4602
2025-04-06 12:27:22,364 - PLN_Processor - DEBUG -   Analisando Linha 15: 'Template 7E - Quais as cinco ações de maior percentual de alta no pregão de 08/05/2023?'
2025-04-06 12:27:22,365 - PLN_Processor - DEBUG -     -> Nome: 'Template 7E', Exemplo norm: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023', Similaridade: 0.4034
2025-04-06 12:27:22,365 - PLN_Processor - DEBUG -   Analisando Linha 16: 'Template 7F - Quais as cinco ações de maior percentual de baixa no pregão de 08/05/2023?'
2025-04-06 12:27:22,366 - PLN_Processor - DEBUG -     -> Nome: 'Template 7F', Exemplo norm: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023', Similaridade: 0.4167
2025-04-06 12:27:22,366 - PLN_Processor - DEBUG -   Analisando Linha 17: 'Template 8A - Qual foi a variação intradiária absoluta da ação do IBovespa com o maior percentual de alta no pregão de 08/05/2023?'
2025-04-06 12:27:22,367 - PLN_Processor - DEBUG -     -> Nome: 'Template 8A', Exemplo norm: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023', Similaridade: 0.3333
2025-04-06 12:27:22,368 - PLN_Processor - DEBUG -   Analisando Linha 18: 'Template 8B - Qual foi o intervalo intradiário percentual da ação com o maior percentual de baixa entre as ações do IMAT no pregão de 08/05/2023?'
2025-04-06 12:27:22,369 - PLN_Processor - DEBUG -     -> Nome: 'Template 8B', Exemplo norm: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023', Similaridade: 0.3051
2025-04-06 12:27:22,370 - PLN_Processor - INFO - Template similar encontrado: Nome='Template 1B', Similaridade=1.0000 (Linha: 'Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?')
2025-04-06 12:27:22,370 - PLN_Processor - DEBUG - Iniciando mapeamento semântico para placeholders...
2025-04-06 12:27:22,370 - PLN_Processor - DEBUG -   - Mapeado #DATA: 2023-05-08
2025-04-06 12:27:22,371 - PLN_Processor - DEBUG -   - #ENTIDADE via NER ORG (Ticker): 'CBAV3'
2025-04-06 12:27:22,371 - PLN_Processor - INFO -   - Mapeado #ENTIDADE: 'CBAV3' (Detectado como: ORG (Ticker))
2025-04-06 12:27:22,376 - PLN_Processor - DEBUG -   - Texto candidato para #VALOR_DESEJADO: 'preço de abertura da' (de ['preço de abertura da'])
2025-04-06 12:27:22,376 - PLN_Processor - DEBUG - Buscando termo para frase normalizada: 'preco de abertura da' (Limiar: 0.75)
2025-04-06 12:27:22,511 - PLN_Processor - DEBUG -   -> Novo melhor (chave): 'precoabertura' similaridade 0.7879
2025-04-06 12:27:22,511 - PLN_Processor - DEBUG -   -> Novo melhor (sinônimo 'preco de abertura'): chave 'precoabertura' similaridade 0.9189
2025-04-06 12:27:22,519 - PLN_Processor - INFO - Melhor termo encontrado para 'preço de abertura da': Chave='precoabertura' (Match com 'preco de abertura', Similaridade: 0.92)
2025-04-06 12:27:22,519 - PLN_Processor - INFO -   - Mapeado #VALOR_DESEJADO: 'precoabertura' (para texto 'preço de abertura da')
2025-04-06 12:27:22,520 - PLN_Processor - DEBUG -   - Texto normalizado para buscar tipo de ação: 'qual foi o preco de abertura da cbav3 em 08052023'
2025-04-06 12:27:22,521 - PLN_Processor - DEBUG -   - Nenhum #TIPO_ACAO explícito encontrado.
2025-04-06 12:27:22,522 - PLN_Processor - DEBUG -   - Nenhum #SETOR explícito encontrado via regex.
2025-04-06 12:27:22,522 - PLN_Processor - INFO - Mapeamentos semânticos finais: {'#DATA': '2023-05-08', '#ENTIDADE': 'CBAV3', '#VALOR_DESEJADO': 'precoabertura'}
2025-04-06 12:27:22,522 - PLN_Processor - DEBUG - JSON final para stdout: {"template_nome": "Template 1B", "mapeamentos": {"#DATA": "2023-05-08", "#ENTIDADE": "CBAV3", "#VALOR_DESEJADO": "precoabertura"}, "_debug_info": {"pergunta_original": "Qual foi o preço de abertura da CBAV3 em 08/05/2023?", "elementos_extraidos_nlp": {"sujeito": ["o preço de abertura da CBAV3 em 08/05/2023"], "predicado": [], "objeto": []}, "entidades_nomeadas_nlp": {"ORG": ["CBAV3"]}, "data_extraida_nlp": "2023-05-08", "similaridade_template": 1.0, "linha_template_correspondente": "Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?", "placeholders_requeridos_verificados": ["#ENTIDADE", "#DATA", "#VALOR_DESEJADO"], "placeholders_faltando_verificados": []}}
2025-04-06 12:27:22,523 - PLN_Processor - INFO - --- Processamento PLN concluído com sucesso ---
>>>>>>> 90d16c9ebcd9eb1db631c342467b8c9f371c2b93
2025-05-02 16:48:24,804 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-02 16:48:24,806 - PLN_Processor - INFO - Carregando spaCy...
2025-05-02 16:48:27,099 - PLN_Processor - INFO - spaCy carregado.
2025-05-02 16:48:27,100 - PLN_Processor - INFO - Dir script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-02 16:48:27,102 - PLN_Processor - INFO - Dic sinonimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-02 16:48:27,104 - PLN_Processor - INFO - Perguntas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-02 16:48:27,105 - PLN_Processor - INFO - Mapa JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-02 16:48:27,106 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Erro carregar mapa.
Traceback (most recent call last):
  File "C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.py", line 60, in <module>
    if fallback_path.is_file(): map_path_to_load = fallback_path
       ^^^^^^^^^^^^^
NameError: name 'fallback_path' is not defined
2025-05-04 13:28:08,130 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-04 13:28:08,131 - PLN_Processor - INFO - Carregando spaCy...
2025-05-04 13:28:10,415 - PLN_Processor - INFO - spaCy carregado.
2025-05-04 13:28:10,415 - PLN_Processor - INFO - Dir script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-04 13:28:10,417 - PLN_Processor - INFO - Dic sinonimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-04 13:28:10,420 - PLN_Processor - INFO - Perguntas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-04 13:28:10,421 - PLN_Processor - INFO - Mapa JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-04 13:28:10,422 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Erro carregar mapa.
Traceback (most recent call last):
  File "C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.py", line 60, in <module>
    if fallback_path.is_file(): map_path_to_load = fallback_path
       ^^^^^^^^^^^^^
NameError: name 'fallback_path' is not defined
2025-05-04 13:30:24,129 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-04 13:30:24,130 - PLN_Processor - INFO - Carregando spaCy...
2025-05-04 13:30:26,082 - PLN_Processor - INFO - spaCy carregado.
2025-05-04 13:30:26,083 - PLN_Processor - INFO - Dir script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-04 13:30:26,083 - PLN_Processor - INFO - Dic sinonimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-04 13:30:26,083 - PLN_Processor - INFO - Perguntas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-04 13:30:26,083 - PLN_Processor - INFO - Mapa JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-04 13:30:26,084 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Erro carregar mapa.
Traceback (most recent call last):
  File "C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.py", line 60, in <module>
    if fallback_path.is_file(): map_path_to_load = fallback_path
       ^^^^^^^^^^^^^
NameError: name 'fallback_path' is not defined
2025-05-04 13:44:44,109 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-04 13:44:44,109 - PLN_Processor - INFO - Carregando spaCy...
2025-05-04 13:44:45,793 - PLN_Processor - INFO - spaCy carregado.
2025-05-04 13:44:45,794 - PLN_Processor - INFO - Dir script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-04 13:44:45,796 - PLN_Processor - INFO - Dic sinonimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-04 13:44:45,798 - PLN_Processor - INFO - Perguntas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-04 13:44:45,799 - PLN_Processor - INFO - Mapa JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-04 13:44:45,800 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-04 13:44:45,823 - PLN_Processor - INFO - Carregados 726 mapeamentos JSON.
2025-05-04 13:44:45,824 - PLN_Processor - DEBUG -  Exemplo: ('3RPETROLEUM', 'RRRP3')
2025-05-04 13:44:45,824 - PLN_Processor - INFO - --- ================================= ---
2025-05-04 13:44:45,824 - PLN_Processor - INFO - --- INICIANDO PLN_PROCESSOR.PY (PID: 12008) ---
2025-05-04 13:44:45,825 - PLN_Processor - INFO - --- Args: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'teste'] ---
2025-05-04 13:44:45,827 - PLN_Processor - INFO - --- CWD: C:\Users\MENICIO JR ---
2025-05-04 13:44:45,827 - PLN_Processor - INFO - --- Script Dir: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-04 13:44:45,828 - PLN_Processor - INFO - Pergunta: 'teste'
2025-05-04 13:44:45,830 - PLN_Processor - INFO - Passo 1: NLP...
2025-05-04 13:44:45,831 - PLN_Processor - DEBUG - spaCy para: 'teste...'
2025-05-04 13:44:45,861 - PLN_Processor - DEBUG -   NER (spaCy):
2025-05-04 13:44:45,861 - PLN_Processor - DEBUG -   NER (final): {}
2025-05-04 13:44:45,861 - PLN_Processor - DEBUG -   SPO (simplif.):
2025-05-04 13:44:45,861 - PLN_Processor - DEBUG -     -> Pred: testir
2025-05-04 13:44:45,861 - PLN_Processor - INFO - spaCy OK. SPO: {'sujeito': [], 'predicado': ['testir'], 'objeto': []}, NER: {}
2025-05-04 13:44:45,862 - PLN_Processor - DEBUG - Extraindo data de: 'teste'
2025-05-04 13:44:45,863 - PLN_Processor - INFO - Nenhuma data encontrada no texto.
2025-05-04 13:44:45,864 - PLN_Processor - INFO - NLP OK.
2025-05-04 13:44:45,866 - PLN_Processor - INFO - Passo 2: Template...
2025-05-04 13:44:45,868 - PLN_Processor - DEBUG - Carregando linhas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-04 13:44:45,887 - PLN_Processor - INFO - 'perguntas_de_interesse.txt' lido com utf-8.
2025-05-04 13:44:45,887 - PLN_Processor - DEBUG - Buscando template p/ 'teste' (Lim 0.65) em 18 linhas...
2025-05-04 13:44:45,889 - PLN_Processor - DEBUG -  -> 'Template 1A' ('qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.0645
2025-05-04 13:44:45,889 - PLN_Processor - DEBUG -    --> Melhor: 'Template 1A', 0.0645
2025-05-04 13:44:45,889 - PLN_Processor - DEBUG -  -> 'Template 1B' ('qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.0741
2025-05-04 13:44:45,890 - PLN_Processor - DEBUG -    --> Melhor: 'Template 1B', 0.0741
2025-05-04 13:44:45,890 - PLN_Processor - DEBUG -  -> 'Template 2A' ('qual o codigo de negociacao da acao da gerdau'): Sim=0.0800
2025-05-04 13:44:45,890 - PLN_Processor - DEBUG -    --> Melhor: 'Template 2A', 0.0800
2025-05-04 13:44:45,891 - PLN_Processor - DEBUG -  -> 'Template 3A' ('quais sao as acoes do setor eletrico'): Sim=0.1951
2025-05-04 13:44:45,891 - PLN_Processor - DEBUG -    --> Melhor: 'Template 3A', 0.1951
2025-05-04 13:44:45,891 - PLN_Processor - DEBUG -  -> 'Template 4A' ('qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.1111
2025-05-04 13:44:45,891 - PLN_Processor - DEBUG -  -> 'Template 4B' ('qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.1316
2025-05-04 13:44:45,892 - PLN_Processor - DEBUG -  -> 'Template 5A' ('qual foi o preco minimo da acao da vale em 08052023'): Sim=0.0714
2025-05-04 13:44:45,892 - PLN_Processor - DEBUG -  -> 'Template 5B' ('qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.0580
2025-05-04 13:44:45,892 - PLN_Processor - DEBUG -  -> 'Template 5C' ('qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.0588
2025-05-04 13:44:45,893 - PLN_Processor - DEBUG -  -> 'Template 6A' ('qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.0732
2025-05-04 13:44:45,893 - PLN_Processor - DEBUG -  -> 'Template 7A' ('qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.0842
2025-05-04 13:44:45,894 - PLN_Processor - DEBUG -  -> 'Template 7B' ('qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.0899
2025-05-04 13:44:45,894 - PLN_Processor - DEBUG -  -> 'Template 7C' ('qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.0964
2025-05-04 13:44:45,894 - PLN_Processor - DEBUG -  -> 'Template 7D' ('qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.1159
2025-05-04 13:44:45,895 - PLN_Processor - DEBUG -  -> 'Template 7E' ('quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.1067
2025-05-04 13:44:45,895 - PLN_Processor - DEBUG -  -> 'Template 7F' ('quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.1053
2025-05-04 13:44:45,895 - PLN_Processor - DEBUG -  -> 'Template 8A' ('qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.0847
2025-05-04 13:44:45,896 - PLN_Processor - DEBUG -  -> 'Template 8B' ('qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.0752
2025-05-04 13:44:45,896 - PLN_Processor - WARNING - Sim max (0.20) < limiar (0.65).
2025-05-04 13:44:45,896 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Pergunta não compreendida (template).
2025-05-04 13:44:45,897 - PLN_Processor - ERROR -   Detalhes: Sim max: 0.20
2025-05-04 13:46:14,366 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-04 13:46:14,366 - PLN_Processor - INFO - Carregando spaCy...
2025-05-04 13:46:16,049 - PLN_Processor - INFO - spaCy carregado.
2025-05-04 13:46:16,050 - PLN_Processor - INFO - Dir script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-04 13:46:16,050 - PLN_Processor - INFO - Dic sinonimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-04 13:46:16,050 - PLN_Processor - INFO - Perguntas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-04 13:46:16,050 - PLN_Processor - INFO - Mapa JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-04 13:46:16,051 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-04 13:46:16,053 - PLN_Processor - INFO - Carregados 726 mapeamentos JSON.
2025-05-04 13:46:16,053 - PLN_Processor - DEBUG -  Exemplo: ('3RPETROLEUM', 'RRRP3')
2025-05-04 13:46:16,053 - PLN_Processor - INFO - --- ================================= ---
2025-05-04 13:46:16,053 - PLN_Processor - INFO - --- INICIANDO PLN_PROCESSOR.PY (PID: 6536) ---
2025-05-04 13:46:16,053 - PLN_Processor - INFO - --- Args: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'] ---
2025-05-04 13:46:16,054 - PLN_Processor - INFO - --- CWD: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-04 13:46:16,054 - PLN_Processor - INFO - --- Script Dir: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-04 13:46:16,055 - PLN_Processor - INFO - Pergunta: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-04 13:46:16,055 - PLN_Processor - INFO - Passo 1: NLP...
2025-05-04 13:46:16,055 - PLN_Processor - DEBUG - spaCy para: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?...'
2025-05-04 13:46:16,072 - PLN_Processor - DEBUG -   NER (spaCy):
2025-05-04 13:46:16,073 - PLN_Processor - DEBUG -     - 'CBAV3' (ORG)
2025-05-04 13:46:16,073 - PLN_Processor - DEBUG -   NER (final): {'ORG': ['CBAV3']}
2025-05-04 13:46:16,073 - PLN_Processor - DEBUG -   SPO (simplif.):
2025-05-04 13:46:16,073 - PLN_Processor - INFO - spaCy OK. SPO: {'sujeito': [], 'predicado': [], 'objeto': []}, NER: {'ORG': ['CBAV3']}
2025-05-04 13:46:16,073 - PLN_Processor - DEBUG - Extraindo data de: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-04 13:46:16,075 - PLN_Processor - INFO - Data explícita encontrada: '08/05/2023' -> 2023-05-08
2025-05-04 13:46:16,075 - PLN_Processor - INFO - NLP OK.
2025-05-04 13:46:16,075 - PLN_Processor - INFO - Passo 2: Template...
2025-05-04 13:46:16,076 - PLN_Processor - DEBUG - Carregando linhas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-04 13:46:16,077 - PLN_Processor - INFO - 'perguntas_de_interesse.txt' lido com utf-8.
2025-05-04 13:46:16,078 - PLN_Processor - DEBUG - Buscando template p/ 'qual foi o preco de abertura da cbav3 em 08052023' (Lim 0.65) em 18 linhas...
2025-05-04 13:46:16,079 - PLN_Processor - DEBUG -  -> 'Template 1A' ('qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.7736
2025-05-04 13:46:16,080 - PLN_Processor - DEBUG -    --> Melhor: 'Template 1A', 0.7736
2025-05-04 13:46:16,080 - PLN_Processor - DEBUG -  -> 'Template 1B' ('qual foi o preco de abertura da cbav3 em 08052023'): Sim=1.0000
2025-05-04 13:46:16,080 - PLN_Processor - DEBUG -    --> Melhor: 'Template 1B', 1.0000
2025-05-04 13:46:16,082 - PLN_Processor - DEBUG -  -> 'Template 2A' ('qual o codigo de negociacao da acao da gerdau'): Sim=0.4894
2025-05-04 13:46:16,083 - PLN_Processor - DEBUG -  -> 'Template 3A' ('quais sao as acoes do setor eletrico'): Sim=0.3294
2025-05-04 13:46:16,084 - PLN_Processor - DEBUG -  -> 'Template 4A' ('qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5345
2025-05-04 13:46:16,086 - PLN_Processor - DEBUG -  -> 'Template 4B' ('qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4333
2025-05-04 13:46:16,087 - PLN_Processor - DEBUG -  -> 'Template 5A' ('qual foi o preco minimo da acao da vale em 08052023'): Sim=0.7200
2025-05-04 13:46:16,087 - PLN_Processor - DEBUG -  -> 'Template 5B' ('qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6195
2025-05-04 13:46:16,088 - PLN_Processor - DEBUG -  -> 'Template 5C' ('qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7143
2025-05-04 13:46:16,089 - PLN_Processor - DEBUG -  -> 'Template 6A' ('qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4286
2025-05-04 13:46:16,090 - PLN_Processor - DEBUG -  -> 'Template 7A' ('qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.4029
2025-05-04 13:46:16,091 - PLN_Processor - DEBUG -  -> 'Template 7B' ('qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.4211
2025-05-04 13:46:16,092 - PLN_Processor - DEBUG -  -> 'Template 7C' ('qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.4252
2025-05-04 13:46:16,093 - PLN_Processor - DEBUG -  -> 'Template 7D' ('qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4602
2025-05-04 13:46:16,093 - PLN_Processor - DEBUG -  -> 'Template 7E' ('quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.4034
2025-05-04 13:46:16,094 - PLN_Processor - DEBUG -  -> 'Template 7F' ('quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.4167
2025-05-04 13:46:16,095 - PLN_Processor - DEBUG -  -> 'Template 8A' ('qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3333
2025-05-04 13:46:16,096 - PLN_Processor - DEBUG -  -> 'Template 8B' ('qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3051
2025-05-04 13:46:16,096 - PLN_Processor - INFO - Template selecionado: 'Template 1B', Sim=1.0000
2025-05-04 13:46:16,096 - PLN_Processor - DEBUG -  Linha: 'Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-04 13:46:16,097 - PLN_Processor - INFO - Template: 'Template 1B' (Sim: 1.0000).
2025-05-04 13:46:16,097 - PLN_Processor - INFO - Passo 3: Mapeamento...
2025-05-04 13:46:16,098 - PLN_Processor - DEBUG - Carregando linhas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-04 13:46:16,114 - PLN_Processor - INFO - 'resultado_similaridade.txt' lido com utf-8.
2025-05-04 13:46:16,114 - PLN_Processor - INFO - Processando dicionário 'resultado_similaridade.txt' (40 linhas)...
2025-05-04 13:46:16,116 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado: 21 chaves.
2025-05-04 13:46:16,116 - PLN_Processor - DEBUG - Mapeando placeholders...
2025-05-04 13:46:16,117 - PLN_Processor - DEBUG -   - Map #DATA#: '2023-05-08'
2025-05-04 13:46:16,117 - PLN_Processor - DEBUG -   - Entidades NER p/ busca: [('CBAV3', 'ORG')]
2025-05-04 13:46:16,118 - PLN_Processor - DEBUG -     Validando NER: 'CBAV3' (ORG) -> Up: 'CBAV3', Norm: 'CBAV3'
2025-05-04 13:46:16,118 - PLN_Processor - DEBUG -     --> MATCH EXATO! Canônico='CBAV3'
2025-05-04 13:46:16,118 - PLN_Processor - INFO -   - Map #ENTIDADE_NOME#: 'CBAV3' (Origem: 'CBAV3', Tipo: NER ORG (Match Exato))
2025-05-04 13:46:16,119 - PLN_Processor - DEBUG -   - Buscando keyword #VALOR_DESEJADO# em: 'qual foi o preço de abertura da cbav3 em 08/05/2023?'
2025-05-04 13:46:16,119 - PLN_Processor - DEBUG -   - Keyword ('preço de abertura') -> chave: 'preco_abertura'
2025-05-04 13:46:16,119 - PLN_Processor - INFO -   - Map #VALOR_DESEJADO#: 'preco_abertura' (Validado)
2025-05-04 13:46:16,119 - PLN_Processor - INFO - Mapeamentos finais: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CBAV3', '#VALOR_DESEJADO#': 'preco_abertura'}
2025-05-04 13:46:16,119 - PLN_Processor - INFO - Mapeamento OK.
2025-05-04 13:46:16,119 - PLN_Processor - INFO - Passo 4: Validando placeholders...
2025-05-04 13:46:16,120 - PLN_Processor - DEBUG -   >> DEBUG VAL: Tpl=Template 1B, Req={'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO'}, Enc=['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-04 13:46:16,120 - PLN_Processor - DEBUG -     --> Encontrado: '#ENTIDADE_NOME#'
2025-05-04 13:46:16,120 - PLN_Processor - DEBUG -     --> Encontrado: '#DATA#'
2025-05-04 13:46:16,120 - PLN_Processor - DEBUG -     --> Faltando: '#VALOR_DESEJADO'
2025-05-04 13:46:16,120 - PLN_Processor - DEBUG -   >> DEBUG VAL: Faltando (final) = ['#VALOR_DESEJADO']
2025-05-04 13:46:16,120 - PLN_Processor - ERROR - VALIDAÇÃO FALHOU 'Template 1B': Faltando: ['#VALOR_DESEJADO']. Req: {'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO'}. Enc: ['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-04 13:46:16,121 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Não foi possível extrair: #VALOR_DESEJADO.
2025-05-04 13:46:16,121 - PLN_Processor - ERROR -   Detalhes: Tpl:Template 1B, Req:{'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO'}, Enc:['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:04:06,243 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 09:04:06,244 - PLN_Processor - INFO - Carregando spaCy...
2025-05-05 09:04:08,924 - PLN_Processor - INFO - spaCy carregado.
2025-05-05 09:04:08,925 - PLN_Processor - INFO - Dir script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 09:04:08,925 - PLN_Processor - INFO - Dic sinonimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:04:08,925 - PLN_Processor - INFO - Perguntas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:04:08,926 - PLN_Processor - INFO - Mapa JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:04:08,927 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:04:08,952 - PLN_Processor - INFO - Carregados 726 mapeamentos JSON.
2025-05-05 09:04:08,953 - PLN_Processor - DEBUG -  Exemplo: ('3RPETROLEUM', 'RRRP3')
2025-05-05 09:04:08,953 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 09:04:08,953 - PLN_Processor - INFO - --- INICIANDO PLN_PROCESSOR.PY (PID: 12268) ---
2025-05-05 09:04:08,953 - PLN_Processor - INFO - --- Args: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 09:04:08,956 - PLN_Processor - INFO - --- CWD: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 09:04:08,956 - PLN_Processor - INFO - --- Script Dir: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 09:04:08,957 - PLN_Processor - INFO - Pergunta: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:04:08,957 - PLN_Processor - INFO - Passo 1: NLP...
2025-05-05 09:04:08,958 - PLN_Processor - DEBUG - spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 09:04:09,015 - PLN_Processor - DEBUG -   NER (spaCy):
2025-05-05 09:04:09,016 - PLN_Processor - DEBUG -     - 'CSN' (ORG)
2025-05-05 09:04:09,016 - PLN_Processor - DEBUG -   NER (final): {'ORG': ['CSN']}
2025-05-05 09:04:09,017 - PLN_Processor - DEBUG -   SPO (simplif.):
2025-05-05 09:04:09,017 - PLN_Processor - INFO - spaCy OK. SPO: {'sujeito': [], 'predicado': [], 'objeto': []}, NER: {'ORG': ['CSN']}
2025-05-05 09:04:09,017 - PLN_Processor - DEBUG - Extraindo data de: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:04:09,019 - PLN_Processor - INFO - Data explícita encontrada: '08/05/2023' -> 2023-05-08
2025-05-05 09:04:09,020 - PLN_Processor - INFO - NLP OK.
2025-05-05 09:04:09,020 - PLN_Processor - INFO - Passo 2: Template...
2025-05-05 09:04:09,022 - PLN_Processor - DEBUG - Carregando linhas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:04:09,043 - PLN_Processor - INFO - 'perguntas_de_interesse.txt' lido com utf-8.
2025-05-05 09:04:09,045 - PLN_Processor - DEBUG - Buscando template p/ 'qual foi o preco de fechamento da acao da csn em 08052023' (Lim 0.65) em 18 linhas...
2025-05-05 09:04:09,046 - PLN_Processor - DEBUG -  -> 'Template 1A' ('qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 09:04:09,046 - PLN_Processor - DEBUG -    --> Melhor: 'Template 1A', 1.0000
2025-05-05 09:04:09,047 - PLN_Processor - DEBUG -  -> 'Template 1B' ('qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 09:04:09,048 - PLN_Processor - DEBUG -  -> 'Template 2A' ('qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 09:04:09,048 - PLN_Processor - DEBUG -  -> 'Template 3A' ('quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 09:04:09,049 - PLN_Processor - DEBUG -  -> 'Template 4A' ('qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 09:04:09,050 - PLN_Processor - DEBUG -  -> 'Template 4B' ('qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 09:04:09,051 - PLN_Processor - DEBUG -  -> 'Template 5A' ('qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 09:04:09,052 - PLN_Processor - DEBUG -  -> 'Template 5B' ('qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 09:04:09,052 - PLN_Processor - DEBUG -  -> 'Template 5C' ('qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 09:04:09,053 - PLN_Processor - DEBUG -  -> 'Template 6A' ('qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 09:04:09,054 - PLN_Processor - DEBUG -  -> 'Template 7A' ('qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 09:04:09,055 - PLN_Processor - DEBUG -  -> 'Template 7B' ('qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 09:04:09,056 - PLN_Processor - DEBUG -  -> 'Template 7C' ('qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 09:04:09,057 - PLN_Processor - DEBUG -  -> 'Template 7D' ('qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 09:04:09,058 - PLN_Processor - DEBUG -  -> 'Template 7E' ('quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 09:04:09,059 - PLN_Processor - DEBUG -  -> 'Template 7F' ('quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 09:04:09,060 - PLN_Processor - DEBUG -  -> 'Template 8A' ('qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 09:04:09,062 - PLN_Processor - DEBUG -  -> 'Template 8B' ('qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 09:04:09,063 - PLN_Processor - INFO - Template selecionado: 'Template 1A', Sim=1.0000
2025-05-05 09:04:09,063 - PLN_Processor - DEBUG -  Linha: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:04:09,063 - PLN_Processor - INFO - Template: 'Template 1A' (Sim: 1.0000).
2025-05-05 09:04:09,064 - PLN_Processor - INFO - Passo 3: Mapeamento...
2025-05-05 09:04:09,065 - PLN_Processor - DEBUG - Carregando linhas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:04:09,090 - PLN_Processor - INFO - 'resultado_similaridade.txt' lido com utf-8.
2025-05-05 09:04:09,090 - PLN_Processor - INFO - Processando dicionário 'resultado_similaridade.txt' (40 linhas)...
2025-05-05 09:04:09,092 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado: 21 chaves.
2025-05-05 09:04:09,093 - PLN_Processor - DEBUG - Mapeando placeholders...
2025-05-05 09:04:09,093 - PLN_Processor - DEBUG -   - Map #DATA#: '2023-05-08'
2025-05-05 09:04:09,093 - PLN_Processor - DEBUG -   - Entidades NER p/ busca: [('CSN', 'ORG')]
2025-05-05 09:04:09,095 - PLN_Processor - DEBUG -     Validando NER: 'CSN' (ORG) -> Up: 'CSN', Norm: 'CSN'
2025-05-05 09:04:09,095 - PLN_Processor - DEBUG -     --> MATCH EXATO! Canônico='CMIN3CSNA3'
2025-05-05 09:04:09,095 - PLN_Processor - INFO -   - Map #ENTIDADE_NOME#: 'CMIN3CSNA3' (Origem: 'CSN', Tipo: NER ORG (Match Exato))
2025-05-05 09:04:09,096 - PLN_Processor - DEBUG -   - Buscando keyword #VALOR_DESEJADO# em: 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 09:04:09,096 - PLN_Processor - DEBUG -   - Keyword ('preço de fechamento') -> chave: 'preco_fechamento'
2025-05-05 09:04:09,096 - PLN_Processor - INFO -   - Map #VALOR_DESEJADO#: 'preco_fechamento' (Validado)
2025-05-05 09:04:09,096 - PLN_Processor - INFO - Mapeamentos finais: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 09:04:09,097 - PLN_Processor - INFO - Mapeamento OK.
2025-05-05 09:04:09,097 - PLN_Processor - INFO - Passo 4: Validando placeholders...
2025-05-05 09:04:09,097 - PLN_Processor - DEBUG -   >> DEBUG VAL: Tpl=Template 1A, Req={'#VALOR_DESEJADO', '#DATA#', '#ENTIDADE_NOME#'}, Enc=['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:04:09,097 - PLN_Processor - DEBUG -     --> Faltando: '#VALOR_DESEJADO'
2025-05-05 09:04:09,097 - PLN_Processor - DEBUG -     --> Encontrado: '#DATA#'
2025-05-05 09:04:09,098 - PLN_Processor - DEBUG -     --> Encontrado: '#ENTIDADE_NOME#'
2025-05-05 09:04:09,098 - PLN_Processor - DEBUG -   >> DEBUG VAL: Faltando (final) = ['#VALOR_DESEJADO']
2025-05-05 09:04:09,098 - PLN_Processor - ERROR - VALIDAÇÃO FALHOU 'Template 1A': Faltando: ['#VALOR_DESEJADO']. Req: {'#VALOR_DESEJADO', '#DATA#', '#ENTIDADE_NOME#'}. Enc: ['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:04:09,098 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Não foi possível extrair: #VALOR_DESEJADO.
2025-05-05 09:04:09,098 - PLN_Processor - ERROR -   Detalhes: Tpl:Template 1A, Req:{'#VALOR_DESEJADO', '#DATA#', '#ENTIDADE_NOME#'}, Enc:['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:28:35,839 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 09:28:35,840 - PLN_Processor - INFO - Carregando spaCy...
2025-05-05 09:28:37,629 - PLN_Processor - INFO - spaCy carregado.
2025-05-05 09:28:37,629 - PLN_Processor - INFO - Dir script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 09:28:37,630 - PLN_Processor - INFO - Dic sinonimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:28:37,630 - PLN_Processor - INFO - Perguntas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:28:37,630 - PLN_Processor - INFO - Mapa JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:28:37,631 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:28:37,633 - PLN_Processor - INFO - Carregados 726 mapeamentos JSON.
2025-05-05 09:28:37,633 - PLN_Processor - DEBUG -  Exemplo: ('3RPETROLEUM', 'RRRP3')
2025-05-05 09:28:37,633 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 09:28:37,634 - PLN_Processor - INFO - --- INICIANDO PLN_PROCESSOR.PY (PID: 11496) ---
2025-05-05 09:28:37,634 - PLN_Processor - INFO - --- Args: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 09:28:37,635 - PLN_Processor - INFO - --- CWD: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 09:28:37,635 - PLN_Processor - INFO - --- Script Dir: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 09:28:37,635 - PLN_Processor - INFO - Pergunta: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:28:37,635 - PLN_Processor - INFO - Passo 1: NLP...
2025-05-05 09:28:37,635 - PLN_Processor - DEBUG - spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 09:28:37,675 - PLN_Processor - DEBUG -   NER (spaCy):
2025-05-05 09:28:37,676 - PLN_Processor - DEBUG -     - 'CSN' (ORG)
2025-05-05 09:28:37,676 - PLN_Processor - DEBUG -   NER (final): {'ORG': ['CSN']}
2025-05-05 09:28:37,676 - PLN_Processor - DEBUG -   SPO (simplif.):
2025-05-05 09:28:37,676 - PLN_Processor - INFO - spaCy OK. SPO: {'sujeito': [], 'predicado': [], 'objeto': []}, NER: {'ORG': ['CSN']}
2025-05-05 09:28:37,676 - PLN_Processor - DEBUG - Extraindo data de: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:28:37,679 - PLN_Processor - INFO - Data explícita encontrada: '08/05/2023' -> 2023-05-08
2025-05-05 09:28:37,679 - PLN_Processor - INFO - NLP OK.
2025-05-05 09:28:37,679 - PLN_Processor - INFO - Passo 2: Template...
2025-05-05 09:28:37,680 - PLN_Processor - DEBUG - Carregando linhas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:28:37,681 - PLN_Processor - INFO - 'perguntas_de_interesse.txt' lido com utf-8.
2025-05-05 09:28:37,682 - PLN_Processor - DEBUG - Buscando template p/ 'qual foi o preco de fechamento da acao da csn em 08052023' (Lim 0.65) em 18 linhas...
2025-05-05 09:28:37,682 - PLN_Processor - DEBUG -  -> 'Template 1A' ('qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 09:28:37,682 - PLN_Processor - DEBUG -    --> Melhor: 'Template 1A', 1.0000
2025-05-05 09:28:37,683 - PLN_Processor - DEBUG -  -> 'Template 1B' ('qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 09:28:37,684 - PLN_Processor - DEBUG -  -> 'Template 2A' ('qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 09:28:37,684 - PLN_Processor - DEBUG -  -> 'Template 3A' ('quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 09:28:37,685 - PLN_Processor - DEBUG -  -> 'Template 4A' ('qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 09:28:37,686 - PLN_Processor - DEBUG -  -> 'Template 4B' ('qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 09:28:37,687 - PLN_Processor - DEBUG -  -> 'Template 5A' ('qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 09:28:37,688 - PLN_Processor - DEBUG -  -> 'Template 5B' ('qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 09:28:37,688 - PLN_Processor - DEBUG -  -> 'Template 5C' ('qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 09:28:37,689 - PLN_Processor - DEBUG -  -> 'Template 6A' ('qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 09:28:37,690 - PLN_Processor - DEBUG -  -> 'Template 7A' ('qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 09:28:37,691 - PLN_Processor - DEBUG -  -> 'Template 7B' ('qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 09:28:37,692 - PLN_Processor - DEBUG -  -> 'Template 7C' ('qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 09:28:37,692 - PLN_Processor - DEBUG -  -> 'Template 7D' ('qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 09:28:37,693 - PLN_Processor - DEBUG -  -> 'Template 7E' ('quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 09:28:37,694 - PLN_Processor - DEBUG -  -> 'Template 7F' ('quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 09:28:37,695 - PLN_Processor - DEBUG -  -> 'Template 8A' ('qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 09:28:37,697 - PLN_Processor - DEBUG -  -> 'Template 8B' ('qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 09:28:37,697 - PLN_Processor - INFO - Template selecionado: 'Template 1A', Sim=1.0000
2025-05-05 09:28:37,697 - PLN_Processor - DEBUG -  Linha: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:28:37,697 - PLN_Processor - INFO - Template: 'Template 1A' (Sim: 1.0000).
2025-05-05 09:28:37,697 - PLN_Processor - INFO - Passo 3: Mapeamento...
2025-05-05 09:28:37,698 - PLN_Processor - DEBUG - Carregando linhas: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:28:37,700 - PLN_Processor - INFO - 'resultado_similaridade.txt' lido com utf-8.
2025-05-05 09:28:37,700 - PLN_Processor - INFO - Processando dicionário 'resultado_similaridade.txt' (40 linhas)...
2025-05-05 09:28:37,702 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado: 21 chaves.
2025-05-05 09:28:37,702 - PLN_Processor - DEBUG - Mapeando placeholders...
2025-05-05 09:28:37,702 - PLN_Processor - DEBUG -   - Map #DATA#: '2023-05-08'
2025-05-05 09:28:37,702 - PLN_Processor - DEBUG -   - Entidades NER p/ busca: [('CSN', 'ORG')]
2025-05-05 09:28:37,703 - PLN_Processor - DEBUG -     Validando NER: 'CSN' (ORG) -> Up: 'CSN', Norm: 'CSN'
2025-05-05 09:28:37,704 - PLN_Processor - DEBUG -     --> MATCH EXATO! Canônico='CMIN3CSNA3'
2025-05-05 09:28:37,704 - PLN_Processor - INFO -   - Map #ENTIDADE_NOME#: 'CMIN3CSNA3' (Origem: 'CSN', Tipo: NER ORG (Match Exato))
2025-05-05 09:28:37,704 - PLN_Processor - DEBUG -   - Buscando keyword #VALOR_DESEJADO# em: 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 09:28:37,704 - PLN_Processor - DEBUG -   - Keyword ('preço de fechamento') -> chave: 'preco_fechamento'
2025-05-05 09:28:37,704 - PLN_Processor - INFO -   - Map #VALOR_DESEJADO#: 'preco_fechamento' (Validado)
2025-05-05 09:28:37,705 - PLN_Processor - INFO - Mapeamentos finais: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 09:28:37,705 - PLN_Processor - INFO - Mapeamento OK.
2025-05-05 09:28:37,705 - PLN_Processor - INFO - Passo 4: Validando placeholders...
2025-05-05 09:28:37,705 - PLN_Processor - DEBUG -   >> DEBUG VAL: Tpl=Template 1A, Req={'#VALOR_DESEJADO', '#ENTIDADE_NOME#', '#DATA#'}, Enc=['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:28:37,705 - PLN_Processor - DEBUG -     --> Faltando: '#VALOR_DESEJADO'
2025-05-05 09:28:37,705 - PLN_Processor - DEBUG -     --> Encontrado: '#ENTIDADE_NOME#'
2025-05-05 09:28:37,706 - PLN_Processor - DEBUG -     --> Encontrado: '#DATA#'
2025-05-05 09:28:37,706 - PLN_Processor - DEBUG -   >> DEBUG VAL: Faltando (final) = ['#VALOR_DESEJADO']
2025-05-05 09:28:37,706 - PLN_Processor - ERROR - VALIDAÇÃO FALHOU 'Template 1A': Faltando: ['#VALOR_DESEJADO']. Req: {'#VALOR_DESEJADO', '#ENTIDADE_NOME#', '#DATA#'}. Enc: ['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:28:37,706 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Não foi possível extrair: #VALOR_DESEJADO.
2025-05-05 09:28:37,706 - PLN_Processor - ERROR -   Detalhes: Tpl:Template 1A, Req:{'#VALOR_DESEJADO', '#ENTIDADE_NOME#', '#DATA#'}, Enc:['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:39:45,052 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 09:39:45,053 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 09:39:46,878 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 09:39:46,878 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 09:39:46,879 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:39:46,879 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:39:46,879 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:39:46,880 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:39:46,880 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:39:46,883 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 09:39:46,883 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 09:39:46,883 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 09:39:46,884 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 3272) ---
2025-05-05 09:39:46,884 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 09:39:46,885 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 09:39:46,885 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 09:39:46,885 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:39:46,886 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 09:39:46,886 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 09:39:46,922 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 09:39:46,922 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 09:39:46,922 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 09:39:46,923 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 09:39:46,923 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 09:39:46,923 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:39:46,924 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 09:39:46,925 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 09:39:46,925 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 09:39:46,925 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 09:39:46,926 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:39:46,927 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 09:39:46,928 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 09:39:46,928 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 09:39:46,929 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 09:39:46,930 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 09:39:46,930 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 09:39:46,930 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 09:39:46,931 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 09:39:46,932 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 09:39:46,933 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 09:39:46,933 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 09:39:46,934 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 09:39:46,935 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 09:39:46,935 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 09:39:46,936 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 09:39:46,937 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 09:39:46,938 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 09:39:46,939 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 09:39:46,941 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 09:39:46,943 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 09:39:46,945 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 09:39:46,947 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 09:39:46,948 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 09:39:46,948 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 09:39:46,949 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:39:46,949 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 09:39:46,949 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 09:39:46,950 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:39:46,950 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 09:39:46,951 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 09:39:46,952 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 09:39:46,952 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 09:39:46,954 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 09:39:46,954 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 09:39:46,954 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 09:39:46,954 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 09:39:46,955 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 09:39:46,956 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 09:39:46,956 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3CSNA3'. Parando busca de entidade.
2025-05-05 09:39:46,956 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3CSNA3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 09:39:46,956 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 09:39:46,956 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 09:39:46,956 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 09:39:46,956 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 09:39:46,957 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 09:39:46,957 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 09:39:46,957 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 09:39:46,957 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 09:39:46,957 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 09:39:46,957 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 09:39:46,958 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 09:39:46,958 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 09:39:46,958 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template... ---
2025-05-05 09:39:46,958 - PLN_Processor - DEBUG -   >> Validação: Template='Template 1A', Requeridos={'#DATA#', '#VALOR_DESEJADO', '#ENTIDADE_NOME#'}, Encontrados=['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:39:46,958 - PLN_Processor - DEBUG -     --> Placeholder requerido '#DATA#' foi encontrado.
2025-05-05 09:39:46,958 - PLN_Processor - DEBUG -     --> Placeholder requerido '#VALOR_DESEJADO' NÃO foi encontrado nos mapeamentos.
2025-05-05 09:39:46,959 - PLN_Processor - DEBUG -     --> Placeholder requerido '#ENTIDADE_NOME#' foi encontrado.
2025-05-05 09:39:46,959 - PLN_Processor - ERROR - VALIDAÇÃO FALHOU para template 'Template 1A': Placeholders faltando: ['#VALOR_DESEJADO']. Requeridos: {'#DATA#', '#VALOR_DESEJADO', '#ENTIDADE_NOME#'}. Encontrados: ['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:39:46,959 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Não foi possível extrair todas as informações necessárias da pergunta: #VALOR_DESEJADO.
2025-05-05 09:39:46,959 - PLN_Processor - ERROR -   Detalhes: Template: Template 1A, Requeridos: {'#DATA#', '#VALOR_DESEJADO', '#ENTIDADE_NOME#'}, Encontrados: ['#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#']
2025-05-05 09:47:52,124 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 09:47:52,124 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 09:47:53,811 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 09:47:53,812 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 09:47:53,812 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:47:53,813 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:47:53,813 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:47:53,813 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:47:53,813 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:47:53,815 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 09:47:53,816 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 09:47:53,816 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 09:47:53,816 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 3968) ---
2025-05-05 09:47:53,816 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 09:47:53,817 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 09:47:53,818 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 09:47:53,818 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:47:53,818 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 09:47:53,818 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 09:47:53,840 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 09:47:53,840 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 09:47:53,841 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 09:47:53,841 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 09:47:53,841 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 09:47:53,841 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:47:53,842 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 09:47:53,842 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 09:47:53,843 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 09:47:53,843 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 09:47:53,844 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:47:53,844 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 09:47:53,845 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 09:47:53,845 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 09:47:53,845 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 09:47:53,846 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 09:47:53,846 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 09:47:53,847 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 09:47:53,847 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 09:47:53,848 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 09:47:53,849 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 09:47:53,850 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 09:47:53,850 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 09:47:53,851 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 09:47:53,852 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 09:47:53,852 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 09:47:53,853 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 09:47:53,854 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 09:47:53,855 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 09:47:53,856 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 09:47:53,856 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 09:47:53,857 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 09:47:53,858 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 09:47:53,859 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 09:47:53,860 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 09:47:53,860 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 09:47:53,860 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 09:47:53,860 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 09:47:53,861 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:47:53,861 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 09:47:53,862 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 09:47:53,862 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 09:47:53,862 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 09:47:53,865 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 09:47:53,865 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 09:47:53,865 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 09:47:53,865 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 09:47:53,865 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 09:47:53,867 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 09:47:53,867 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3CSNA3'. Parando busca de entidade.
2025-05-05 09:47:53,867 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3CSNA3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 09:47:53,867 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 09:47:53,867 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 09:47:53,867 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 09:47:53,868 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 09:47:53,868 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 09:47:53,868 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 09:47:53,868 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 09:47:53,868 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 09:47:53,868 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 09:47:53,868 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 09:47:53,868 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 09:47:53,869 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 09:47:53,869 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets)... ---
2025-05-05 09:47:53,869 - PLN_Processor - DEBUG -   >> Validação: Template='Template 1A', Requeridos_Set={'#DATA#', '#VALOR_DESEJADO', '#ENTIDADE_NOME#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#DATA#', '#ENTIDADE_NOME#'}
2025-05-05 09:47:53,869 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets): {'#VALOR_DESEJADO'}
2025-05-05 09:47:53,869 - PLN_Processor - ERROR - VALIDAÇÃO FALHOU para template 'Template 1A': Placeholders faltando: ['#VALOR_DESEJADO']. Requeridos_Set: {'#DATA#', '#VALOR_DESEJADO', '#ENTIDADE_NOME#'}. Encontrados_Set: {'#VALOR_DESEJADO#', '#DATA#', '#ENTIDADE_NOME#'}
2025-05-05 09:47:53,870 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Não foi possível extrair todas as informações necessárias da pergunta: #VALOR_DESEJADO.
2025-05-05 09:47:53,870 - PLN_Processor - ERROR -   Detalhes: Template: Template 1A, Requeridos_Set: {'#DATA#', '#VALOR_DESEJADO', '#ENTIDADE_NOME#'}, Encontrados_Set: {'#VALOR_DESEJADO#', '#DATA#', '#ENTIDADE_NOME#'}
2025-05-05 09:57:34,100 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 09:57:34,101 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 09:57:35,862 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 09:57:35,863 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 09:57:35,866 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 09:57:35,866 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:57:35,867 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:57:35,867 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:57:35,868 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 09:57:35,870 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 09:57:35,870 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 09:57:35,870 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 09:57:35,871 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 10556) ---
2025-05-05 09:57:35,871 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'teste'] ---
2025-05-05 09:57:35,872 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR ---
2025-05-05 09:57:35,872 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 09:57:35,873 - PLN_Processor - INFO - Pergunta do usuário recebida: 'teste'
2025-05-05 09:57:35,873 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 09:57:35,873 - PLN_Processor - DEBUG - Executando análise spaCy para: 'teste...'
2025-05-05 09:57:35,907 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 09:57:35,907 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {}
2025-05-05 09:57:35,907 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 09:57:35,908 - PLN_Processor - DEBUG -     -> Predicado (ROOT): testir (teste)
2025-05-05 09:57:35,908 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': ['testir'], 'objeto': []}
2025-05-05 09:57:35,910 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'teste'
2025-05-05 09:57:35,911 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 09:57:35,911 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 09:57:35,913 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 09:57:35,913 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 09:57:35,915 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 09:57:35,916 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 09:57:35,917 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 09:57:35,917 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 09:57:35,918 - PLN_Processor - DEBUG - Buscando template similar para 'teste' (Limiar 0.65) em 18 linhas...
2025-05-05 09:57:35,920 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.0645
2025-05-05 09:57:35,920 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.0645
2025-05-05 09:57:35,920 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.0741
2025-05-05 09:57:35,920 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1B', Sim=0.0741
2025-05-05 09:57:35,921 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.0800
2025-05-05 09:57:35,921 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=0.0800
2025-05-05 09:57:35,921 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.1951
2025-05-05 09:57:35,921 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 3A', Sim=0.1951
2025-05-05 09:57:35,922 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.1111
2025-05-05 09:57:35,922 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.1316
2025-05-05 09:57:35,922 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.0714
2025-05-05 09:57:35,923 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.0580
2025-05-05 09:57:35,923 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.0588
2025-05-05 09:57:35,923 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.0732
2025-05-05 09:57:35,924 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.0842
2025-05-05 09:57:35,924 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.0899
2025-05-05 09:57:35,924 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.0964
2025-05-05 09:57:35,925 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.1159
2025-05-05 09:57:35,925 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.1067
2025-05-05 09:57:35,925 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.1053
2025-05-05 09:57:35,926 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.0847
2025-05-05 09:57:35,926 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.0752
2025-05-05 09:57:35,926 - PLN_Processor - WARNING - Similaridade máxima encontrada (0.20) não atingiu o limiar (0.65). Nenhum template selecionado.
2025-05-05 09:57:35,927 - PLN_Processor - ERROR - Finalizando c/ erro (status 1): Não foi possível compreender a pergunta (nenhum template similar encontrado).
2025-05-05 09:57:35,928 - PLN_Processor - ERROR -   Detalhes: Similaridade máxima encontrada: 0.20 (Limiar: 0.65)
2025-05-05 10:00:06,007 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 10:00:06,008 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 10:00:07,744 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 10:00:07,744 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 10:00:07,744 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:00:07,744 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:00:07,745 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:00:07,746 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:00:07,746 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:00:07,748 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 10:00:07,748 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 10:00:07,749 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 10:00:07,749 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 8068) ---
2025-05-05 10:00:07,749 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 10:00:07,750 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 10:00:07,750 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 10:00:07,750 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:00:07,751 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 10:00:07,751 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 10:00:07,770 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 10:00:07,771 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 10:00:07,772 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 10:00:07,772 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 10:00:07,772 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 10:00:07,772 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:00:07,773 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 10:00:07,774 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 10:00:07,774 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 10:00:07,774 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 10:00:07,775 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:00:07,776 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 10:00:07,776 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:00:07,776 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 10:00:07,777 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 10:00:07,777 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 10:00:07,777 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 10:00:07,778 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 10:00:07,780 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 10:00:07,780 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 10:00:07,781 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 10:00:07,782 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 10:00:07,783 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 10:00:07,784 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 10:00:07,784 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 10:00:07,786 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 10:00:07,787 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 10:00:07,788 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 10:00:07,789 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 10:00:07,791 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 10:00:07,793 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 10:00:07,794 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 10:00:07,795 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 10:00:07,798 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 10:00:07,798 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 10:00:07,799 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:00:07,799 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 10:00:07,799 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 10:00:07,800 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:00:07,801 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 10:00:07,802 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:00:07,802 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 10:00:07,803 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 10:00:07,805 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 10:00:07,805 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 10:00:07,805 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 10:00:07,805 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 10:00:07,806 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 10:00:07,807 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 10:00:07,808 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3CSNA3'. Parando busca de entidade.
2025-05-05 10:00:07,808 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3CSNA3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 10:00:07,808 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 10:00:07,808 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 10:00:07,808 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 10:00:07,808 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 10:00:07,809 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 10:00:07,809 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 10:00:07,809 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 10:00:07,809 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 10:00:07,809 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 10:00:07,809 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 10:00:07,810 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 10:00:07,810 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 10:00:07,810 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 10:00:07,810 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}
2025-05-05 10:00:07,810 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 10:00:07,810 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 10:00:07,811 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 10:00:07,811 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CMIN3CSNA3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da csn em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CSN"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 10:00:07,811 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 10:00:07,812 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 10:00:07,812 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 10:02:42,239 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 10:02:42,239 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 10:02:44,000 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 10:02:44,000 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 10:02:44,001 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:02:44,001 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:02:44,001 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:02:44,001 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:02:44,002 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:02:44,003 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 10:02:44,003 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 10:02:44,004 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 10:02:44,004 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 10140) ---
2025-05-05 10:02:44,004 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'] ---
2025-05-05 10:02:44,005 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 10:02:44,005 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 10:02:44,005 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 10:02:44,005 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 10:02:44,006 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?...'
2025-05-05 10:02:44,023 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 10:02:44,023 - PLN_Processor - DEBUG -     -> Encontrada: 'VALE' (ORG)
2025-05-05 10:02:44,023 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['VALE']}
2025-05-05 10:02:44,023 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 10:02:44,023 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 10:02:44,024 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 10:02:44,025 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 10:02:44,025 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 10:02:44,025 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 10:02:44,025 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 10:02:44,026 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:02:44,027 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 10:02:44,027 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:02:44,028 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 10:02:44,028 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da vale em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 10:02:44,029 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.9391
2025-05-05 10:02:44,030 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.9391
2025-05-05 10:02:44,031 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7477
2025-05-05 10:02:44,032 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5825
2025-05-05 10:02:44,034 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3191
2025-05-05 10:02:44,036 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5440
2025-05-05 10:02:44,038 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4031
2025-05-05 10:02:44,039 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8807
2025-05-05 10:02:44,040 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6557
2025-05-05 10:02:44,042 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7438
2025-05-05 10:02:44,042 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5481
2025-05-05 10:02:44,043 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3649
2025-05-05 10:02:44,044 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3662
2025-05-05 10:02:44,045 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3676
2025-05-05 10:02:44,047 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4262
2025-05-05 10:02:44,047 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3750
2025-05-05 10:02:44,048 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3876
2025-05-05 10:02:44,049 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4678
2025-05-05 10:02:44,050 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4839
2025-05-05 10:02:44,050 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391)
2025-05-05 10:02:44,051 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:02:44,051 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391).
2025-05-05 10:02:44,051 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 10:02:44,052 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:02:44,052 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 10:02:44,053 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:02:44,053 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 10:02:44,053 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 10:02:44,055 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 10:02:44,055 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 10:02:44,055 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 10:02:44,056 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 10:02:44,056 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('VALE', 'ORG')]
2025-05-05 10:02:44,057 - PLN_Processor - DEBUG -     - Validando entidade NER: 'VALE' (ORG) -> Upper: 'VALE', Norm: 'VALE'
2025-05-05 10:02:44,057 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='VALE3'. Parando busca de entidade.
2025-05-05 10:02:44,057 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'VALE3' (Origem NER: 'VALE', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 10:02:44,057 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da vale em 08/05/2023?'
2025-05-05 10:02:44,057 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 10:02:44,058 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 10:02:44,058 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 10:02:44,058 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 10:02:44,058 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 10:02:44,058 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 10:02:44,058 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 10:02:44,058 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 10:02:44,058 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 10:02:44,059 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'VALE3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 10:02:44,059 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 10:02:44,059 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 10:02:44,059 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO#'}
2025-05-05 10:02:44,059 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 10:02:44,059 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 10:02:44,060 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 10:02:44,060 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "VALE3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da VALE em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da vale em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["VALE"]}, "nlp_data": "2023-05-08", "template_similaridade": 0.9391, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 10:02:44,060 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 10:02:44,060 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 10:02:44,061 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 10:34:15,437 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 10:34:15,465 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 10:34:19,810 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 10:34:19,810 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 10:34:19,811 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:34:19,811 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:34:19,812 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:34:19,812 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:34:19,813 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:34:19,836 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 10:34:19,837 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 10:34:19,837 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 10:34:19,837 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 3024) ---
2025-05-05 10:34:19,838 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'] ---
2025-05-05 10:34:19,839 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 10:34:19,839 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 10:34:19,840 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 10:34:19,840 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 10:34:19,841 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?...'
2025-05-05 10:34:19,877 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 10:34:19,878 - PLN_Processor - DEBUG -     -> Encontrada: 'VALE' (ORG)
2025-05-05 10:34:19,878 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['VALE']}
2025-05-05 10:34:19,878 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 10:34:19,878 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 10:34:19,879 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 10:34:19,880 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 10:34:19,880 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 10:34:19,881 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 10:34:19,881 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 10:34:19,882 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:34:19,883 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 10:34:19,900 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:34:19,901 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 10:34:19,903 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da vale em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 10:34:19,903 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.9391
2025-05-05 10:34:19,903 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.9391
2025-05-05 10:34:19,904 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7477
2025-05-05 10:34:19,905 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5825
2025-05-05 10:34:19,905 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3191
2025-05-05 10:34:19,906 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5440
2025-05-05 10:34:19,907 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4031
2025-05-05 10:34:19,908 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8807
2025-05-05 10:34:19,908 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6557
2025-05-05 10:34:19,909 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7438
2025-05-05 10:34:19,910 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5481
2025-05-05 10:34:19,911 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3649
2025-05-05 10:34:19,912 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3662
2025-05-05 10:34:19,913 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3676
2025-05-05 10:34:19,914 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4262
2025-05-05 10:34:19,916 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3750
2025-05-05 10:34:19,918 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3876
2025-05-05 10:34:19,921 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4678
2025-05-05 10:34:19,924 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4839
2025-05-05 10:34:19,924 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391)
2025-05-05 10:34:19,924 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:34:19,924 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391).
2025-05-05 10:34:19,925 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 10:34:19,926 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:34:19,926 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 10:34:19,943 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:34:19,943 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 10:34:19,944 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 10:34:19,947 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 10:34:19,948 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 10:34:19,948 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 10:34:19,948 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 10:34:19,949 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('VALE', 'ORG')]
2025-05-05 10:34:19,951 - PLN_Processor - DEBUG -     - Validando entidade NER: 'VALE' (ORG) -> Upper: 'VALE', Norm: 'VALE'
2025-05-05 10:34:19,951 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='VALE3'. Parando busca de entidade.
2025-05-05 10:34:19,951 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'VALE3' (Origem NER: 'VALE', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 10:34:19,952 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da vale em 08/05/2023?'
2025-05-05 10:34:19,952 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 10:34:19,952 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 10:34:19,953 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 10:34:19,953 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 10:34:19,953 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 10:34:19,953 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 10:34:19,954 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 10:34:19,954 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 10:34:19,954 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 10:34:19,955 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'VALE3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 10:34:19,955 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 10:34:19,956 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 10:34:19,965 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 10:34:19,965 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 10:34:19,965 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 10:34:19,966 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 10:34:19,969 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "VALE3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da VALE em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da vale em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["VALE"]}, "nlp_data": "2023-05-08", "template_similaridade": 0.9391, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 10:34:19,969 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 10:34:19,973 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 10:34:19,975 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 10:35:02,890 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 10:35:02,890 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 10:35:05,198 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 10:35:05,198 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 10:35:05,199 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:35:05,199 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:35:05,200 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:35:05,200 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:35:05,201 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:35:05,202 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 10:35:05,203 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 10:35:05,203 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 10:35:05,203 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 11304) ---
2025-05-05 10:35:05,203 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 10:35:05,204 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 10:35:05,204 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 10:35:05,205 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:35:05,205 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 10:35:05,205 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 10:35:05,226 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 10:35:05,227 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 10:35:05,227 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 10:35:05,227 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 10:35:05,227 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 10:35:05,227 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:35:05,228 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 10:35:05,229 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 10:35:05,229 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 10:35:05,229 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 10:35:05,230 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:35:05,230 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 10:35:05,231 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:35:05,231 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 10:35:05,232 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 10:35:05,232 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 10:35:05,233 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 10:35:05,233 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 10:35:05,234 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 10:35:05,235 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 10:35:05,236 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 10:35:05,237 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 10:35:05,238 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 10:35:05,239 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 10:35:05,239 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 10:35:05,240 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 10:35:05,241 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 10:35:05,242 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 10:35:05,243 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 10:35:05,244 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 10:35:05,245 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 10:35:05,246 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 10:35:05,247 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 10:35:05,248 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 10:35:05,248 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 10:35:05,249 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:35:05,249 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 10:35:05,249 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 10:35:05,250 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:35:05,250 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 10:35:05,251 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:35:05,251 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 10:35:05,251 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 10:35:05,253 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 10:35:05,254 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 10:35:05,254 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 10:35:05,254 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 10:35:05,254 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 10:35:05,255 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 10:35:05,256 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3CSNA3'. Parando busca de entidade.
2025-05-05 10:35:05,256 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3CSNA3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 10:35:05,256 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 10:35:05,256 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 10:35:05,257 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 10:35:05,257 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 10:35:05,257 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 10:35:05,257 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 10:35:05,258 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 10:35:05,258 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 10:35:05,258 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 10:35:05,258 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 10:35:05,258 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 10:35:05,259 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 10:35:05,259 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 10:35:05,259 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO#'}
2025-05-05 10:35:05,260 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 10:35:05,260 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 10:35:05,260 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 10:35:05,261 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CMIN3CSNA3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da csn em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CSN"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 10:35:05,261 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 10:35:05,262 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 10:35:05,262 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 10:37:04,668 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 10:37:04,668 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 10:37:06,364 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 10:37:06,364 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 10:37:06,365 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:37:06,365 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:37:06,365 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:37:06,366 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:37:06,366 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:37:06,368 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 10:37:06,368 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 10:37:06,368 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 10:37:06,369 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 11528) ---
2025-05-05 10:37:06,369 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'] ---
2025-05-05 10:37:06,370 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 10:37:06,370 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 10:37:06,371 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 10:37:06,371 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 10:37:06,371 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?...'
2025-05-05 10:37:06,412 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 10:37:06,413 - PLN_Processor - DEBUG -     -> Encontrada: 'VALE' (ORG)
2025-05-05 10:37:06,413 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['VALE']}
2025-05-05 10:37:06,413 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 10:37:06,413 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 10:37:06,413 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 10:37:06,414 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 10:37:06,415 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 10:37:06,415 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 10:37:06,415 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 10:37:06,416 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:37:06,416 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 10:37:06,417 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:37:06,417 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 10:37:06,419 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da vale em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 10:37:06,419 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.9391
2025-05-05 10:37:06,420 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.9391
2025-05-05 10:37:06,420 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7477
2025-05-05 10:37:06,421 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5825
2025-05-05 10:37:06,421 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3191
2025-05-05 10:37:06,423 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5440
2025-05-05 10:37:06,423 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4031
2025-05-05 10:37:06,424 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8807
2025-05-05 10:37:06,425 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6557
2025-05-05 10:37:06,425 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7438
2025-05-05 10:37:06,426 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5481
2025-05-05 10:37:06,427 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3649
2025-05-05 10:37:06,428 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3662
2025-05-05 10:37:06,429 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3676
2025-05-05 10:37:06,429 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4262
2025-05-05 10:37:06,430 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3750
2025-05-05 10:37:06,431 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3876
2025-05-05 10:37:06,432 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4678
2025-05-05 10:37:06,434 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4839
2025-05-05 10:37:06,434 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391)
2025-05-05 10:37:06,434 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 10:37:06,434 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391).
2025-05-05 10:37:06,434 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 10:37:06,435 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:37:06,436 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 10:37:06,437 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:37:06,437 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 10:37:06,437 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 10:37:06,439 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 10:37:06,439 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 10:37:06,439 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 10:37:06,439 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 10:37:06,440 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('VALE', 'ORG')]
2025-05-05 10:37:06,441 - PLN_Processor - DEBUG -     - Validando entidade NER: 'VALE' (ORG) -> Upper: 'VALE', Norm: 'VALE'
2025-05-05 10:37:06,441 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='VALE3'. Parando busca de entidade.
2025-05-05 10:37:06,441 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'VALE3' (Origem NER: 'VALE', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 10:37:06,441 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da vale em 08/05/2023?'
2025-05-05 10:37:06,441 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 10:37:06,441 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 10:37:06,442 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 10:37:06,442 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 10:37:06,442 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 10:37:06,442 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 10:37:06,442 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 10:37:06,442 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 10:37:06,442 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 10:37:06,442 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'VALE3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 10:37:06,443 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 10:37:06,443 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 10:37:06,443 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}
2025-05-05 10:37:06,443 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 10:37:06,443 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 10:37:06,444 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 10:37:06,444 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "VALE3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da VALE em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da vale em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["VALE"]}, "nlp_data": "2023-05-08", "template_similaridade": 0.9391, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 10:37:06,444 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 10:37:06,444 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 10:37:06,444 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 10:39:15,978 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 10:39:15,978 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 10:39:18,325 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 10:39:18,325 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 10:39:18,325 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:39:18,326 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:39:18,326 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:39:18,326 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:39:18,326 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:39:18,328 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 10:39:18,328 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 10:39:18,328 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 10:39:18,329 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 3808) ---
2025-05-05 10:39:18,329 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'] ---
2025-05-05 10:39:18,330 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 10:39:18,330 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 10:39:18,330 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 10:39:18,330 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 10:39:18,330 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?...'
2025-05-05 10:39:18,347 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 10:39:18,348 - PLN_Processor - DEBUG -     -> Encontrada: 'CBAV3' (ORG)
2025-05-05 10:39:18,348 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CBAV3']}
2025-05-05 10:39:18,348 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 10:39:18,348 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 10:39:18,348 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 10:39:18,349 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 10:39:18,350 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 10:39:18,350 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 10:39:18,350 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 10:39:18,351 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:39:18,351 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 10:39:18,352 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:39:18,352 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 10:39:18,353 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de abertura da cbav3 em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 10:39:18,353 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.7736
2025-05-05 10:39:18,353 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.7736
2025-05-05 10:39:18,354 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=1.0000
2025-05-05 10:39:18,354 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1B', Sim=1.0000
2025-05-05 10:39:18,355 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.4894
2025-05-05 10:39:18,355 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3294
2025-05-05 10:39:18,356 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5345
2025-05-05 10:39:18,357 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4333
2025-05-05 10:39:18,357 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.7200
2025-05-05 10:39:18,358 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6195
2025-05-05 10:39:18,359 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7143
2025-05-05 10:39:18,359 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4286
2025-05-05 10:39:18,360 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.4029
2025-05-05 10:39:18,361 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.4211
2025-05-05 10:39:18,362 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.4252
2025-05-05 10:39:18,363 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4602
2025-05-05 10:39:18,364 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.4034
2025-05-05 10:39:18,364 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.4167
2025-05-05 10:39:18,365 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3333
2025-05-05 10:39:18,366 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3051
2025-05-05 10:39:18,366 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 1.0000)
2025-05-05 10:39:18,367 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 10:39:18,367 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 1.0000).
2025-05-05 10:39:18,367 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 10:39:18,368 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:39:18,368 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 10:39:18,369 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:39:18,369 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 10:39:18,369 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 10:39:18,371 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 10:39:18,371 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 10:39:18,372 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 10:39:18,372 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 10:39:18,372 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CBAV3', 'ORG')]
2025-05-05 10:39:18,373 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CBAV3' (ORG) -> Upper: 'CBAV3', Norm: 'CBAV3'
2025-05-05 10:39:18,373 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CBAV3'. Parando busca de entidade.
2025-05-05 10:39:18,373 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CBAV3' (Origem NER: 'CBAV3', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 10:39:18,373 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de abertura da cbav3 em 08/05/2023?'
2025-05-05 10:39:18,374 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 10:39:18,374 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Sim
2025-05-05 10:39:18,374 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_abertura'
2025-05-05 10:39:18,374 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_abertura'
2025-05-05 10:39:18,374 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_abertura' existe no dicionário de sinônimos: Sim
2025-05-05 10:39:18,374 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_abertura' (Keyword encontrada e chave validada no dicionário)
2025-05-05 10:39:18,374 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CBAV3', '#VALOR_DESEJADO#': 'preco_abertura'}
2025-05-05 10:39:18,375 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 10:39:18,375 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 10:39:18,375 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1B', Requeridos_Set={'#DATA#', '#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#', '#DATA#'}
2025-05-05 10:39:18,375 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 10:39:18,375 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1B'. Todos os requeridos foram mapeados.
2025-05-05 10:39:18,375 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 10:39:18,376 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1B", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CBAV3", "#VALOR_DESEJADO#": "preco_abertura"}, "_debug_info": {"pergunta_original": "Qual foi o preço de abertura da CBAV3 em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de abertura da cbav3 em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CBAV3"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 10:39:18,376 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 10:39:18,376 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 10:39:18,376 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 10:39:40,836 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 10:39:40,836 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 10:39:42,692 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 10:39:42,692 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 10:39:42,693 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:39:42,693 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:39:42,693 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:39:42,694 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:39:42,694 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 10:39:42,696 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 10:39:42,696 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 10:39:42,696 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 10:39:42,697 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 14280) ---
2025-05-05 10:39:42,697 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 10:39:42,698 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 10:39:42,698 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 10:39:42,698 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 10:39:42,698 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 10:39:42,699 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 10:39:42,715 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 10:39:42,715 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 10:39:42,716 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 10:39:42,716 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 10:39:42,716 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 10:39:42,716 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 10:39:42,718 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 10:39:42,718 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 10:39:42,718 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 10:39:42,718 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 10:39:42,719 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 10:39:42,720 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 10:39:42,720 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:39:42,720 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 10:39:42,721 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 10:39:42,721 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 10:39:42,722 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 10:39:42,722 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 10:39:42,723 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 10:39:42,723 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 10:39:42,723 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 10:39:42,724 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 10:39:42,725 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 10:39:42,725 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 10:39:42,726 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 10:39:42,727 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 10:39:42,727 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 10:39:42,728 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 10:39:42,729 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 10:39:42,729 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 10:39:42,730 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 10:39:42,730 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 10:39:42,731 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 10:39:42,732 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 10:39:42,733 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 10:39:42,733 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 10:39:42,734 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 10:39:42,734 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 10:39:42,734 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 10:39:42,735 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 10:39:42,735 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 10:39:42,736 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 10:39:42,736 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 10:39:42,736 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 10:39:42,738 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 10:39:42,738 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 10:39:42,738 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 10:39:42,738 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 10:39:42,739 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 10:39:42,740 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 10:39:42,740 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GGBR3GGBR4'. Parando busca de entidade.
2025-05-05 10:39:42,740 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GGBR3GGBR4' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 10:39:42,740 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 10:39:42,740 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 10:39:42,740 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 10:39:42,741 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 10:39:42,742 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 10:39:42,743 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 10:39:42,744 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 10:39:42,744 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 10:39:42,744 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 10:39:42,744 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 10:39:42,744 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 10:39:42,744 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 10:39:42,744 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GGBR3GGBR4', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 10:39:42,745 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 10:39:42,745 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 10:39:42,745 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 10:39:42,745 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 10:39:42,745 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 10:39:42,745 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 10:39:42,746 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GGBR3GGBR4", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 10:39:42,746 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 10:39:42,746 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 10:39:42,747 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:06:40,164 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:06:40,165 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:06:41,855 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:06:41,855 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:06:41,856 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:06:41,856 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:06:41,856 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:06:41,857 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:06:41,857 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:06:41,859 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:06:41,859 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:06:41,860 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:06:41,860 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 11996) ---
2025-05-05 11:06:41,860 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 11:06:41,861 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:06:41,861 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:06:41,861 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:06:41,862 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:06:41,862 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 11:06:41,907 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:06:41,908 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 11:06:41,908 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 11:06:41,908 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:06:41,908 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:06:41,909 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:06:41,911 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:06:41,912 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:06:41,912 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:06:41,913 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:06:41,914 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:06:41,914 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:06:41,915 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:06:41,915 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:06:41,917 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:06:41,917 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 11:06:41,917 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 11:06:41,918 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 11:06:41,919 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 11:06:41,919 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 11:06:41,920 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 11:06:41,921 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 11:06:41,922 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 11:06:41,922 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 11:06:41,923 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 11:06:41,924 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 11:06:41,925 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 11:06:41,926 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 11:06:41,927 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 11:06:41,927 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 11:06:41,928 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 11:06:41,929 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 11:06:41,930 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 11:06:41,931 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 11:06:41,931 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 11:06:41,932 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:06:41,932 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 11:06:41,932 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:06:41,933 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:06:41,933 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:06:41,934 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:06:41,934 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:06:41,935 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:06:41,936 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:06:41,937 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:06:41,937 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:06:41,937 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:06:41,937 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 11:06:41,938 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 11:06:41,938 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3CSNA3'. Parando busca de entidade.
2025-05-05 11:06:41,938 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3CSNA3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:06:41,939 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 11:06:41,939 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:06:41,939 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:06:41,939 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:06:41,939 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:06:41,939 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 11:06:41,939 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 11:06:41,940 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 11:06:41,940 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 11:06:41,940 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:06:41,940 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 11:06:41,940 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:06:41,940 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:06:41,941 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#DATA#', '#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}, Encontrados_Set={'#DATA#', '#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}
2025-05-05 11:06:41,941 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:06:41,941 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 11:06:41,941 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:06:41,942 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CMIN3CSNA3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da csn em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CSN"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:06:41,942 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:06:41,942 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:06:41,942 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:07:15,175 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:07:15,175 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:07:16,845 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:07:16,845 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:07:16,845 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:07:16,845 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:07:16,846 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:07:16,846 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:07:16,846 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:07:16,848 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:07:16,848 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:07:16,848 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:07:16,848 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 9628) ---
2025-05-05 11:07:16,849 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'] ---
2025-05-05 11:07:16,850 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:07:16,850 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:07:16,850 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 11:07:16,850 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:07:16,850 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?...'
2025-05-05 11:07:16,876 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:07:16,876 - PLN_Processor - DEBUG -     -> Encontrada: 'VALE' (ORG)
2025-05-05 11:07:16,876 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['VALE']}
2025-05-05 11:07:16,877 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:07:16,877 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:07:16,877 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 11:07:16,878 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:07:16,879 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:07:16,879 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:07:16,879 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:07:16,881 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:07:16,881 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:07:16,881 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:07:16,882 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:07:16,882 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da vale em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:07:16,883 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.9391
2025-05-05 11:07:16,883 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.9391
2025-05-05 11:07:16,883 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7477
2025-05-05 11:07:16,884 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5825
2025-05-05 11:07:16,885 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3191
2025-05-05 11:07:16,886 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5440
2025-05-05 11:07:16,887 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4031
2025-05-05 11:07:16,887 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8807
2025-05-05 11:07:16,888 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6557
2025-05-05 11:07:16,888 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7438
2025-05-05 11:07:16,889 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5481
2025-05-05 11:07:16,890 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3649
2025-05-05 11:07:16,891 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3662
2025-05-05 11:07:16,892 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3676
2025-05-05 11:07:16,893 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4262
2025-05-05 11:07:16,894 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3750
2025-05-05 11:07:16,895 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3876
2025-05-05 11:07:16,896 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4678
2025-05-05 11:07:16,897 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4839
2025-05-05 11:07:16,897 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391)
2025-05-05 11:07:16,897 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:07:16,897 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391).
2025-05-05 11:07:16,898 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:07:16,898 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:07:16,899 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:07:16,899 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:07:16,899 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:07:16,900 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:07:16,901 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:07:16,902 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:07:16,902 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:07:16,902 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:07:16,902 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('VALE', 'ORG')]
2025-05-05 11:07:16,903 - PLN_Processor - DEBUG -     - Validando entidade NER: 'VALE' (ORG) -> Upper: 'VALE', Norm: 'VALE'
2025-05-05 11:07:16,903 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='VALE3'. Parando busca de entidade.
2025-05-05 11:07:16,903 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'VALE3' (Origem NER: 'VALE', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:07:16,904 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da vale em 08/05/2023?'
2025-05-05 11:07:16,904 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:07:16,904 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:07:16,904 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:07:16,904 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:07:16,904 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 11:07:16,904 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 11:07:16,905 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 11:07:16,905 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 11:07:16,905 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:07:16,905 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'VALE3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 11:07:16,905 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:07:16,905 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:07:16,906 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 11:07:16,906 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:07:16,906 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 11:07:16,906 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:07:16,906 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "VALE3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da VALE em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da vale em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["VALE"]}, "nlp_data": "2023-05-08", "template_similaridade": 0.9391, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:07:16,907 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:07:16,907 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:07:16,907 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:07:34,768 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:07:34,768 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:07:40,823 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:07:40,823 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:07:40,824 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:07:40,824 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:07:40,825 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:07:40,826 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:07:40,827 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:07:40,830 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:07:40,831 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:07:40,831 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:07:40,831 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 11288) ---
2025-05-05 11:07:40,832 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 11:07:40,833 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:07:40,834 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:07:40,835 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:07:40,835 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:07:40,835 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 11:07:40,864 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:07:40,865 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 11:07:40,865 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 11:07:40,865 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:07:40,866 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:07:40,866 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:07:40,868 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 11:07:40,868 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 11:07:40,868 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:07:40,869 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:07:40,871 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:07:40,871 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:07:40,872 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:07:40,873 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:07:40,873 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 11:07:40,875 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 11:07:40,875 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 11:07:40,876 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 11:07:40,877 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 11:07:40,878 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 11:07:40,879 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 11:07:40,880 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 11:07:40,882 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 11:07:40,883 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 11:07:40,886 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 11:07:40,887 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 11:07:40,889 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 11:07:40,890 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 11:07:40,892 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 11:07:40,893 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 11:07:40,894 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 11:07:40,895 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 11:07:40,897 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 11:07:40,899 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 11:07:40,909 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 11:07:40,909 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 11:07:40,910 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:07:40,910 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 11:07:40,910 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:07:40,912 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:07:40,913 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:07:40,914 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:07:40,914 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:07:40,914 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:07:40,918 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:07:40,918 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:07:40,919 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:07:40,919 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 11:07:40,919 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 11:07:40,921 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 11:07:40,921 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GGBR3GGBR4'. Parando busca de entidade.
2025-05-05 11:07:40,922 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GGBR3GGBR4' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:07:40,922 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 11:07:40,923 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:07:40,923 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:07:40,923 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:07:40,923 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:07:40,923 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 11:07:40,924 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 11:07:40,924 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 11:07:40,924 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 11:07:40,924 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 11:07:40,925 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 11:07:40,925 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 11:07:40,925 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 11:07:40,925 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 11:07:40,925 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 11:07:40,926 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 11:07:40,926 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 11:07:40,926 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 11:07:40,926 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 11:07:40,926 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 11:07:40,927 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 11:07:40,927 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 11:07:40,927 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 11:07:40,927 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 11:07:40,927 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 11:07:40,928 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 11:07:40,928 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 11:07:40,928 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 11:07:40,928 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 11:07:40,929 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 11:07:40,929 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 11:07:40,929 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 11:07:40,929 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:07:40,930 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GGBR3GGBR4', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 11:07:40,931 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:07:40,931 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:07:40,931 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}
2025-05-05 11:07:40,932 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:07:40,932 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 11:07:40,932 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:07:40,933 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GGBR3GGBR4", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:07:40,933 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:07:40,934 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:07:40,934 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:08:03,873 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:08:03,873 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:08:05,506 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:08:05,506 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:08:05,507 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:08:05,507 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:08:05,507 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:08:05,507 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:08:05,508 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:08:05,509 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:08:05,510 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:08:05,510 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:08:05,510 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 3180) ---
2025-05-05 11:08:05,510 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'] ---
2025-05-05 11:08:05,511 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:08:05,511 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:08:05,511 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 11:08:05,512 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:08:05,512 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?...'
2025-05-05 11:08:05,529 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:08:05,529 - PLN_Processor - DEBUG -     -> Encontrada: 'CBAV3' (ORG)
2025-05-05 11:08:05,529 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CBAV3']}
2025-05-05 11:08:05,529 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:08:05,529 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:08:05,530 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 11:08:05,531 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:08:05,531 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:08:05,531 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:08:05,531 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:08:05,532 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:08:05,532 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:08:05,533 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:08:05,533 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:08:05,534 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de abertura da cbav3 em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:08:05,534 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.7736
2025-05-05 11:08:05,534 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.7736
2025-05-05 11:08:05,535 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=1.0000
2025-05-05 11:08:05,535 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1B', Sim=1.0000
2025-05-05 11:08:05,536 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.4894
2025-05-05 11:08:05,536 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3294
2025-05-05 11:08:05,537 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5345
2025-05-05 11:08:05,538 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4333
2025-05-05 11:08:05,539 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.7200
2025-05-05 11:08:05,539 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6195
2025-05-05 11:08:05,540 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7143
2025-05-05 11:08:05,541 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4286
2025-05-05 11:08:05,542 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.4029
2025-05-05 11:08:05,543 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.4211
2025-05-05 11:08:05,544 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.4252
2025-05-05 11:08:05,544 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4602
2025-05-05 11:08:05,545 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.4034
2025-05-05 11:08:05,546 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.4167
2025-05-05 11:08:05,547 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3333
2025-05-05 11:08:05,548 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3051
2025-05-05 11:08:05,548 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 1.0000)
2025-05-05 11:08:05,548 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 11:08:05,548 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 1.0000).
2025-05-05 11:08:05,548 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:08:05,549 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:08:05,549 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:08:05,550 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:08:05,550 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:08:05,550 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:08:05,552 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:08:05,553 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:08:05,553 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:08:05,553 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:08:05,553 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CBAV3', 'ORG')]
2025-05-05 11:08:05,554 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CBAV3' (ORG) -> Upper: 'CBAV3', Norm: 'CBAV3'
2025-05-05 11:08:05,554 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CBAV3'. Parando busca de entidade.
2025-05-05 11:08:05,554 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CBAV3' (Origem NER: 'CBAV3', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:08:05,555 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de abertura da cbav3 em 08/05/2023?'
2025-05-05 11:08:05,555 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:08:05,555 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Sim
2025-05-05 11:08:05,555 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_abertura'
2025-05-05 11:08:05,555 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_abertura'
2025-05-05 11:08:05,555 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_abertura' existe no dicionário de sinônimos: Sim
2025-05-05 11:08:05,555 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_abertura' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:08:05,556 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CBAV3', '#VALOR_DESEJADO#': 'preco_abertura'}
2025-05-05 11:08:05,556 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:08:05,556 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:08:05,556 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1B', Requeridos_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 11:08:05,556 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:08:05,557 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1B'. Todos os requeridos foram mapeados.
2025-05-05 11:08:05,557 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:08:05,557 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1B", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CBAV3", "#VALOR_DESEJADO#": "preco_abertura"}, "_debug_info": {"pergunta_original": "Qual foi o preço de abertura da CBAV3 em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de abertura da cbav3 em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CBAV3"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:08:05,557 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:08:05,558 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:08:05,558 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:10:11,424 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:10:11,425 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:10:13,274 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:10:13,274 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:10:13,275 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:10:13,275 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:10:13,275 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:10:13,276 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:10:13,276 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:10:13,277 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:10:13,278 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:10:13,278 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:10:13,278 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 14320) ---
2025-05-05 11:10:13,278 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação do ITAU em 08/05/2023?'] ---
2025-05-05 11:10:13,279 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:10:13,279 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:10:13,280 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação do ITAU em 08/05/2023?'
2025-05-05 11:10:13,280 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:10:13,280 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação do ITAU em 08/05/2023?...'
2025-05-05 11:10:13,298 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:10:13,298 - PLN_Processor - DEBUG -     -> Encontrada: 'ITAU' (ORG)
2025-05-05 11:10:13,298 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['ITAU']}
2025-05-05 11:10:13,298 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:10:13,298 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:10:13,299 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação do ITAU em 08/05/2023?'
2025-05-05 11:10:13,300 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:10:13,300 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:10:13,300 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:10:13,301 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:10:13,302 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:10:13,302 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:10:13,303 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:10:13,303 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:10:13,303 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao do itau em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:10:13,304 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.9217
2025-05-05 11:10:13,304 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.9217
2025-05-05 11:10:13,305 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7290
2025-05-05 11:10:13,305 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5825
2025-05-05 11:10:13,306 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3830
2025-05-05 11:10:13,307 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5760
2025-05-05 11:10:13,308 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.5581
2025-05-05 11:10:13,308 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8073
2025-05-05 11:10:13,309 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.7377
2025-05-05 11:10:13,310 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7438
2025-05-05 11:10:13,311 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5630
2025-05-05 11:10:13,311 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3784
2025-05-05 11:10:13,312 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3944
2025-05-05 11:10:13,313 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3824
2025-05-05 11:10:13,313 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4590
2025-05-05 11:10:13,314 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3750
2025-05-05 11:10:13,315 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3876
2025-05-05 11:10:13,316 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4678
2025-05-05 11:10:13,317 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4946
2025-05-05 11:10:13,318 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9217)
2025-05-05 11:10:13,318 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:10:13,318 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9217).
2025-05-05 11:10:13,318 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:10:13,319 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:10:13,319 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:10:13,320 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:10:13,320 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:10:13,320 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:10:13,322 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:10:13,322 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:10:13,322 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:10:13,323 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:10:13,323 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('ITAU', 'ORG')]
2025-05-05 11:10:13,324 - PLN_Processor - DEBUG -     - Validando entidade NER: 'ITAU' (ORG) -> Upper: 'ITAU', Norm: 'ITAU'
2025-05-05 11:10:13,324 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='ITUB3ITUB4'. Parando busca de entidade.
2025-05-05 11:10:13,324 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'ITUB3ITUB4' (Origem NER: 'ITAU', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:10:13,324 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação do itau em 08/05/2023?'
2025-05-05 11:10:13,324 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:10:13,325 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:10:13,325 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:10:13,325 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:10:13,325 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 11:10:13,325 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 11:10:13,325 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 11:10:13,325 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 11:10:13,326 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:10:13,326 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'ITUB3ITUB4', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 11:10:13,326 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:10:13,326 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:10:13,326 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}
2025-05-05 11:10:13,326 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:10:13,327 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 11:10:13,327 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:10:13,327 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "ITUB3ITUB4", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação do ITAU em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao do itau em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["ITAU"]}, "nlp_data": "2023-05-08", "template_similaridade": 0.9217, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:10:13,327 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:10:13,328 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:10:13,328 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:10:37,275 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:10:37,275 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:10:38,868 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:10:38,869 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:10:38,869 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:10:38,869 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:10:38,870 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:10:38,871 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:10:38,871 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:10:38,873 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:10:38,873 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:10:38,873 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:10:38,873 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 9920) ---
2025-05-05 11:10:38,873 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de abertura da CMIN3 em 08/05/2023?'] ---
2025-05-05 11:10:38,874 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:10:38,875 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:10:38,875 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de abertura da CMIN3 em 08/05/2023?'
2025-05-05 11:10:38,875 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:10:38,875 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de abertura da CMIN3 em 08/05/2023?...'
2025-05-05 11:10:38,892 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:10:38,892 - PLN_Processor - DEBUG -     -> Encontrada: 'CMIN3' (ORG)
2025-05-05 11:10:38,893 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CMIN3']}
2025-05-05 11:10:38,893 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:10:38,893 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:10:38,894 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de abertura da CMIN3 em 08/05/2023?'
2025-05-05 11:10:38,896 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:10:38,897 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:10:38,897 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:10:38,897 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:10:38,898 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:10:38,899 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:10:38,899 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:10:38,900 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:10:38,900 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de abertura da cmin3 em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:10:38,901 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.7925
2025-05-05 11:10:38,901 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.7925
2025-05-05 11:10:38,902 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.9388
2025-05-05 11:10:38,902 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1B', Sim=0.9388
2025-05-05 11:10:38,902 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.4681
2025-05-05 11:10:38,903 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3294
2025-05-05 11:10:38,904 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5517
2025-05-05 11:10:38,905 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4333
2025-05-05 11:10:38,905 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.6800
2025-05-05 11:10:38,906 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6195
2025-05-05 11:10:38,907 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.6964
2025-05-05 11:10:38,908 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4286
2025-05-05 11:10:38,909 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.4029
2025-05-05 11:10:38,910 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.4211
2025-05-05 11:10:38,910 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.4252
2025-05-05 11:10:38,911 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4602
2025-05-05 11:10:38,912 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.4034
2025-05-05 11:10:38,913 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.4167
2025-05-05 11:10:38,914 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3333
2025-05-05 11:10:38,915 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3051
2025-05-05 11:10:38,915 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 0.9388)
2025-05-05 11:10:38,915 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 11:10:38,915 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 0.9388).
2025-05-05 11:10:38,915 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:10:38,917 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:10:38,918 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:10:38,919 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:10:38,919 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:10:38,919 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:10:38,921 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:10:38,921 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:10:38,921 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:10:38,922 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:10:38,922 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CMIN3', 'ORG')]
2025-05-05 11:10:38,923 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CMIN3' (ORG) -> Upper: 'CMIN3', Norm: 'CMIN3'
2025-05-05 11:10:38,923 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3'. Parando busca de entidade.
2025-05-05 11:10:38,923 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3' (Origem NER: 'CMIN3', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:10:38,923 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de abertura da cmin3 em 08/05/2023?'
2025-05-05 11:10:38,924 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:10:38,924 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Sim
2025-05-05 11:10:38,924 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_abertura'
2025-05-05 11:10:38,924 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_abertura'
2025-05-05 11:10:38,924 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_abertura' existe no dicionário de sinônimos: Sim
2025-05-05 11:10:38,924 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_abertura' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:10:38,925 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3', '#VALOR_DESEJADO#': 'preco_abertura'}
2025-05-05 11:10:38,925 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:10:38,925 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:10:38,925 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1B', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#DATA#', '#ENTIDADE_NOME#'}
2025-05-05 11:10:38,926 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:10:38,926 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1B'. Todos os requeridos foram mapeados.
2025-05-05 11:10:38,926 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:10:38,926 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1B", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CMIN3", "#VALOR_DESEJADO#": "preco_abertura"}, "_debug_info": {"pergunta_original": "Qual foi o preço de abertura da CMIN3 em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de abertura da cmin3 em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CMIN3"]}, "nlp_data": "2023-05-08", "template_similaridade": 0.9388, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:10:38,927 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:10:38,927 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:10:38,927 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:11:00,390 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:11:00,390 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:11:02,154 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:11:02,154 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:11:02,155 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:11:02,155 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:11:02,155 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:11:02,156 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:11:02,156 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:11:02,158 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:11:02,158 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:11:02,158 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:11:02,159 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 13196) ---
2025-05-05 11:11:02,159 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Vale?'] ---
2025-05-05 11:11:02,160 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:11:02,160 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:11:02,160 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Vale?'
2025-05-05 11:11:02,161 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:11:02,161 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Vale?...'
2025-05-05 11:11:02,178 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:11:02,178 - PLN_Processor - DEBUG -     -> Encontrada: 'Vale' (ORG)
2025-05-05 11:11:02,178 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Vale']}
2025-05-05 11:11:02,178 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:11:02,179 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:11:02,179 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Vale?'
2025-05-05 11:11:02,180 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 11:11:02,180 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 11:11:02,180 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:11:02,181 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:11:02,182 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:11:02,182 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:11:02,182 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:11:02,183 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:11:02,183 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da vale' (Limiar 0.65) em 18 linhas...
2025-05-05 11:11:02,184 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5600
2025-05-05 11:11:02,184 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5600
2025-05-05 11:11:02,185 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4783
2025-05-05 11:11:02,185 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.9091
2025-05-05 11:11:02,185 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=0.9091
2025-05-05 11:11:02,186 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.4051
2025-05-05 11:11:02,187 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5091
2025-05-05 11:11:02,187 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4211
2025-05-05 11:11:02,188 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.6170
2025-05-05 11:11:02,189 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4673
2025-05-05 11:11:02,189 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.4717
2025-05-05 11:11:02,190 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4500
2025-05-05 11:11:02,191 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2406
2025-05-05 11:11:02,192 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2520
2025-05-05 11:11:02,192 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2479
2025-05-05 11:11:02,193 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3178
2025-05-05 11:11:02,193 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2301
2025-05-05 11:11:02,194 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2281
2025-05-05 11:11:02,195 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3590
2025-05-05 11:11:02,196 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3392
2025-05-05 11:11:02,196 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 0.9091)
2025-05-05 11:11:02,197 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:11:02,197 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 0.9091).
2025-05-05 11:11:02,197 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:11:02,198 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:11:02,198 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:11:02,199 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:11:02,199 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:11:02,199 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:11:02,202 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:11:02,202 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:11:02,202 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:11:02,202 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 11:11:02,202 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Vale', 'ORG')]
2025-05-05 11:11:02,204 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Vale' (ORG) -> Upper: 'VALE', Norm: 'VALE'
2025-05-05 11:11:02,204 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='VALE3'. Parando busca de entidade.
2025-05-05 11:11:02,204 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'VALE3' (Origem NER: 'Vale', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:11:02,204 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da vale?'
2025-05-05 11:11:02,204 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:11:02,204 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 11:11:02,205 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 11:11:02,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 11:11:02,207 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 11:11:02,208 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 11:11:02,208 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 11:11:02,208 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 11:11:02,208 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 11:11:02,208 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 11:11:02,208 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:11:02,208 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'VALE3', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 11:11:02,209 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:11:02,209 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:11:02,209 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 11:11:02,209 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:11:02,209 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 11:11:02,210 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:11:02,210 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "VALE3", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Vale?", "pergunta_normalizada": "qual o codigo de negociacao da acao da vale", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Vale"]}, "nlp_data": null, "template_similaridade": 0.9091, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:11:02,210 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:11:02,210 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:11:02,211 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:19:30,460 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:19:30,460 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:19:32,146 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:19:32,146 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:19:32,146 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:19:32,147 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:19:32,147 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:19:32,147 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:19:32,147 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:19:32,149 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:19:32,149 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:19:32,149 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:19:32,150 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 1132) ---
2025-05-05 11:19:32,150 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 11:19:32,151 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:19:32,151 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:19:32,151 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:19:32,151 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:19:32,152 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 11:19:32,174 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:19:32,174 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 11:19:32,174 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 11:19:32,175 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:19:32,175 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:19:32,175 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:19:32,177 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:19:32,177 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:19:32,178 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:19:32,178 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:19:32,179 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:19:32,180 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:19:32,181 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:19:32,181 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:19:32,182 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:19:32,182 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 11:19:32,182 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 11:19:32,183 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 11:19:32,184 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 11:19:32,184 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 11:19:32,185 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 11:19:32,186 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 11:19:32,187 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 11:19:32,188 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 11:19:32,189 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 11:19:32,189 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 11:19:32,190 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 11:19:32,191 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 11:19:32,192 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 11:19:32,193 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 11:19:32,194 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 11:19:32,195 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 11:19:32,196 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 11:19:32,198 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 11:19:32,198 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 11:19:32,198 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:19:32,199 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 11:19:32,199 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:19:32,200 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:19:32,200 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:19:32,201 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:19:32,201 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:19:32,201 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:19:32,203 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:19:32,204 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:19:32,204 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:19:32,204 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:19:32,204 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 11:19:32,205 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 11:19:32,205 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3CSNA3'. Parando busca de entidade.
2025-05-05 11:19:32,205 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3CSNA3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:19:32,206 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 11:19:32,206 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:19:32,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:19:32,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:19:32,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:19:32,206 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 11:19:32,206 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 11:19:32,207 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 11:19:32,207 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 11:19:32,207 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:19:32,207 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 11:19:32,207 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:19:32,207 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:19:32,208 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#ENTIDADE_NOME#', '#DATA#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}
2025-05-05 11:19:32,208 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:19:32,208 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 11:19:32,208 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:19:32,209 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CMIN3CSNA3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da csn em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CSN"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:19:32,209 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:19:32,209 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:19:32,209 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:19:54,597 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:19:54,597 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:19:56,278 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:19:56,278 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:19:56,278 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:19:56,279 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:19:56,279 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:19:56,279 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:19:56,279 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:19:56,281 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:19:56,281 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:19:56,281 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:19:56,282 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 7272) ---
2025-05-05 11:19:56,282 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 11:19:56,283 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:19:56,283 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:19:56,283 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:19:56,283 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:19:56,284 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 11:19:56,300 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:19:56,300 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 11:19:56,300 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 11:19:56,300 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:19:56,301 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:19:56,301 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:19:56,302 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 11:19:56,302 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 11:19:56,302 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:19:56,303 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:19:56,304 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:19:56,304 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:19:56,305 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:19:56,305 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:19:56,306 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 11:19:56,307 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 11:19:56,308 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 11:19:56,309 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 11:19:56,310 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 11:19:56,310 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 11:19:56,311 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 11:19:56,312 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 11:19:56,313 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 11:19:56,314 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 11:19:56,315 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 11:19:56,315 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 11:19:56,316 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 11:19:56,317 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 11:19:56,317 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 11:19:56,318 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 11:19:56,319 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 11:19:56,319 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 11:19:56,320 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 11:19:56,321 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 11:19:56,322 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 11:19:56,322 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 11:19:56,323 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:19:56,323 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 11:19:56,323 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:19:56,324 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:19:56,324 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:19:56,325 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:19:56,325 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:19:56,325 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:19:56,327 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:19:56,327 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:19:56,328 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:19:56,328 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 11:19:56,328 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 11:19:56,329 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 11:19:56,329 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GGBR3GGBR4'. Parando busca de entidade.
2025-05-05 11:19:56,329 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GGBR3GGBR4' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:19:56,330 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 11:19:56,330 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:19:56,330 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:19:56,330 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:19:56,330 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:19:56,330 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 11:19:56,330 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 11:19:56,331 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 11:19:56,332 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 11:19:56,333 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 11:19:56,334 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 11:19:56,334 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:19:56,334 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GGBR3GGBR4', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 11:19:56,334 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:19:56,334 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:19:56,334 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 11:19:56,335 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:19:56,335 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 11:19:56,335 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:19:56,335 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GGBR3GGBR4", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:19:56,335 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:19:56,336 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:19:56,336 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:27:45,548 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:27:45,548 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:27:47,811 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:27:47,811 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:27:47,812 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:27:47,812 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:27:47,812 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:27:47,812 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:27:47,813 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:27:47,815 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:27:47,815 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:27:47,816 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:27:47,816 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 8888) ---
2025-05-05 11:27:47,816 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 11:27:47,817 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:27:47,817 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:27:47,818 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:27:47,818 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:27:47,818 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 11:27:47,858 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:27:47,859 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 11:27:47,859 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 11:27:47,859 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:27:47,859 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:27:47,860 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:27:47,861 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:27:47,862 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:27:47,862 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:27:47,863 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:27:47,863 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:27:47,864 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:27:47,865 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:27:47,865 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:27:47,866 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:27:47,866 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 11:27:47,866 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 11:27:47,867 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 11:27:47,868 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 11:27:47,868 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 11:27:47,869 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 11:27:47,870 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 11:27:47,871 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 11:27:47,871 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 11:27:47,872 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 11:27:47,873 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 11:27:47,874 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 11:27:47,875 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 11:27:47,876 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 11:27:47,876 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 11:27:47,877 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 11:27:47,878 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 11:27:47,879 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 11:27:47,880 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 11:27:47,880 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 11:27:47,881 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:27:47,881 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 11:27:47,881 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:27:47,882 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:27:47,882 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:27:47,884 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:27:47,884 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:27:47,884 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:27:47,886 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:27:47,886 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:27:47,886 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:27:47,886 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:27:47,887 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 11:27:47,888 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 11:27:47,888 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3CSNA3'. Parando busca de entidade.
2025-05-05 11:27:47,888 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3CSNA3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:27:47,888 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 11:27:47,888 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:27:47,889 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:27:47,889 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:27:47,889 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:27:47,889 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 11:27:47,889 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 11:27:47,889 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 11:27:47,889 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 11:27:47,889 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:27:47,890 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3CSNA3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 11:27:47,890 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:27:47,890 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:27:47,890 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 11:27:47,890 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:27:47,891 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 11:27:47,891 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:27:47,891 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CMIN3CSNA3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da csn em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CSN"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:27:47,891 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:27:47,891 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:27:47,892 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:28:18,816 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:28:18,817 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:28:21,110 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:28:21,110 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:28:21,111 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:28:21,111 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:28:21,111 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:28:21,112 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:28:21,112 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:28:21,114 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:28:21,114 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:28:21,114 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:28:21,114 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 14232) ---
2025-05-05 11:28:21,115 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 11:28:21,115 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:28:21,116 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:28:21,116 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:28:21,116 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:28:21,116 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 11:28:21,133 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:28:21,134 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 11:28:21,134 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 11:28:21,134 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:28:21,134 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:28:21,134 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:28:21,135 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 11:28:21,136 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 11:28:21,136 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:28:21,136 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:28:21,137 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:28:21,137 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:28:21,138 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:28:21,138 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:28:21,138 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 11:28:21,139 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 11:28:21,139 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 11:28:21,140 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 11:28:21,140 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 11:28:21,141 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 11:28:21,141 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 11:28:21,142 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 11:28:21,143 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 11:28:21,143 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 11:28:21,144 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 11:28:21,144 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 11:28:21,145 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 11:28:21,146 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 11:28:21,147 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 11:28:21,147 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 11:28:21,148 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 11:28:21,148 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 11:28:21,149 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 11:28:21,150 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 11:28:21,151 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 11:28:21,151 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 11:28:21,151 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:28:21,151 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 11:28:21,152 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:28:21,153 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:28:21,153 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:28:21,153 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:28:21,154 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:28:21,154 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:28:21,156 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:28:21,156 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:28:21,156 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:28:21,156 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 11:28:21,157 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 11:28:21,158 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 11:28:21,158 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GGBR3GGBR4'. Parando busca de entidade.
2025-05-05 11:28:21,158 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GGBR3GGBR4' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:28:21,158 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 11:28:21,158 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:28:21,158 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 11:28:21,159 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 11:28:21,160 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 11:28:21,161 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 11:28:21,162 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 11:28:21,162 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 11:28:21,162 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 11:28:21,162 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 11:28:21,162 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 11:28:21,162 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:28:21,163 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GGBR3GGBR4', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 11:28:21,163 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:28:21,163 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:28:21,163 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}
2025-05-05 11:28:21,163 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:28:21,163 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 11:28:21,164 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:28:21,164 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GGBR3GGBR4", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:28:21,164 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:28:21,164 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:28:21,165 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:33:24,351 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:33:24,351 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:33:25,967 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:33:25,968 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:33:25,968 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:33:25,968 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:33:25,968 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:33:25,969 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:33:25,969 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:33:25,971 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:33:25,971 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:33:25,971 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:33:25,971 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 1828) ---
2025-05-05 11:33:25,972 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'] ---
2025-05-05 11:33:25,972 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:33:25,973 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:33:25,973 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:33:25,973 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:33:25,973 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?...'
2025-05-05 11:33:25,990 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:33:25,991 - PLN_Processor - DEBUG -     -> Encontrada: 'CSN' (ORG)
2025-05-05 11:33:25,991 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CSN']}
2025-05-05 11:33:25,991 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:33:25,991 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:33:25,991 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:33:25,992 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:33:25,993 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:33:25,993 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:33:25,993 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:33:25,994 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:33:25,994 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:33:25,995 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:33:25,995 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:33:25,996 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da csn em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:33:25,996 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=1.0000
2025-05-05 11:33:25,996 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=1.0000
2025-05-05 11:33:25,997 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7358
2025-05-05 11:33:25,997 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5882
2025-05-05 11:33:25,998 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3226
2025-05-05 11:33:25,999 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5484
2025-05-05 11:33:26,000 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4062
2025-05-05 11:33:26,000 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8148
2025-05-05 11:33:26,002 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6612
2025-05-05 11:33:26,002 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7333
2025-05-05 11:33:26,003 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5970
2025-05-05 11:33:26,004 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3537
2025-05-05 11:33:26,005 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3688
2025-05-05 11:33:26,006 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3704
2025-05-05 11:33:26,006 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4463
2025-05-05 11:33:26,007 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3780
2025-05-05 11:33:26,008 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3906
2025-05-05 11:33:26,009 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4588
2025-05-05 11:33:26,010 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4973
2025-05-05 11:33:26,010 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000)
2025-05-05 11:33:26,010 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:33:26,011 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 1.0000).
2025-05-05 11:33:26,011 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:33:26,012 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:33:26,012 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:33:26,013 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:33:26,013 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:33:26,013 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:33:26,015 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:33:26,015 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:33:26,015 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:33:26,015 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:33:26,015 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CSN', 'ORG')]
2025-05-05 11:33:26,016 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CSN' (ORG) -> Upper: 'CSN', Norm: 'CSN'
2025-05-05 11:33:26,017 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CMIN3'. Parando busca de entidade.
2025-05-05 11:33:26,017 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CMIN3' (Origem NER: 'CSN', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:33:26,017 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da csn em 08/05/2023?'
2025-05-05 11:33:26,017 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:33:26,017 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:33:26,017 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:33:26,018 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:33:26,018 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 11:33:26,018 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 11:33:26,018 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 11:33:26,018 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 11:33:26,018 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:33:26,018 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CMIN3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 11:33:26,019 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:33:26,019 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:33:26,019 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#', '#DATA#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#', '#DATA#'}
2025-05-05 11:33:26,019 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:33:26,019 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 11:33:26,019 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:33:26,020 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CMIN3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da CSN em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da csn em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CSN"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:33:26,020 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:33:26,020 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:33:26,020 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:33:44,206 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:33:44,206 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:33:45,848 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:33:45,848 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:33:45,849 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:33:45,849 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:33:45,849 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:33:45,850 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:33:45,850 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:33:45,852 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:33:45,852 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:33:45,852 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:33:45,852 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 7420) ---
2025-05-05 11:33:45,852 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'] ---
2025-05-05 11:33:45,853 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:33:45,854 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:33:45,854 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 11:33:45,854 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:33:45,854 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?...'
2025-05-05 11:33:45,872 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:33:45,872 - PLN_Processor - DEBUG -     -> Encontrada: 'VALE' (ORG)
2025-05-05 11:33:45,872 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['VALE']}
2025-05-05 11:33:45,872 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:33:45,872 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:33:45,873 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de fechamento da ação da VALE em 08/05/2023?'
2025-05-05 11:33:45,874 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:33:45,874 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:33:45,874 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:33:45,874 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:33:45,875 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:33:45,876 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:33:45,876 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:33:45,876 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:33:45,877 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de fechamento da acao da vale em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:33:45,877 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.9391
2025-05-05 11:33:45,878 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.9391
2025-05-05 11:33:45,878 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.7477
2025-05-05 11:33:45,879 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.5825
2025-05-05 11:33:45,879 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3191
2025-05-05 11:33:45,880 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5440
2025-05-05 11:33:45,881 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4031
2025-05-05 11:33:45,882 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.8807
2025-05-05 11:33:45,883 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6557
2025-05-05 11:33:45,883 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7438
2025-05-05 11:33:45,884 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.5481
2025-05-05 11:33:45,885 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.3649
2025-05-05 11:33:45,886 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.3662
2025-05-05 11:33:45,887 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.3676
2025-05-05 11:33:45,887 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4262
2025-05-05 11:33:45,888 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.3750
2025-05-05 11:33:45,889 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.3876
2025-05-05 11:33:45,890 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.4678
2025-05-05 11:33:45,891 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.4839
2025-05-05 11:33:45,892 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391)
2025-05-05 11:33:45,892 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1A - Qual foi o preço de fechamento da ação da CSN em 08/05/2023?'
2025-05-05 11:33:45,892 - PLN_Processor - INFO - Template selecionado: 'Template 1A' (Similaridade: 0.9391).
2025-05-05 11:33:45,892 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:33:45,893 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:33:45,893 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:33:45,894 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:33:45,894 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:33:45,894 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:33:45,896 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:33:45,896 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:33:45,897 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:33:45,897 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:33:45,897 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('VALE', 'ORG')]
2025-05-05 11:33:45,898 - PLN_Processor - DEBUG -     - Validando entidade NER: 'VALE' (ORG) -> Upper: 'VALE', Norm: 'VALE'
2025-05-05 11:33:45,898 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='VALE3'. Parando busca de entidade.
2025-05-05 11:33:45,898 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'VALE3' (Origem NER: 'VALE', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de fechamento da ação da vale em 08/05/2023?'
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Sim
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_fechamento'
2025-05-05 11:33:45,899 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_fechamento'
2025-05-05 11:33:45,900 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_fechamento' existe no dicionário de sinônimos: Sim
2025-05-05 11:33:45,900 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_fechamento' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:33:45,900 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'VALE3', '#VALOR_DESEJADO#': 'preco_fechamento'}
2025-05-05 11:33:45,900 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:33:45,900 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:33:45,901 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1A', Requeridos_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#DATA#', '#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 11:33:45,901 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:33:45,901 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1A'. Todos os requeridos foram mapeados.
2025-05-05 11:33:45,901 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:33:45,901 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1A", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "VALE3", "#VALOR_DESEJADO#": "preco_fechamento"}, "_debug_info": {"pergunta_original": "Qual foi o preço de fechamento da ação da VALE em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de fechamento da acao da vale em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["VALE"]}, "nlp_data": "2023-05-08", "template_similaridade": 0.9391, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:33:45,902 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:33:45,902 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:33:45,902 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:33:59,301 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:33:59,301 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:34:01,058 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:34:01,059 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:34:01,060 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:34:01,060 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:34:01,060 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:34:01,061 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:34:01,061 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:34:01,063 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:34:01,063 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:34:01,063 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:34:01,064 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 3320) ---
2025-05-05 11:34:01,064 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'] ---
2025-05-05 11:34:01,065 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:34:01,065 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:34:01,065 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 11:34:01,065 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:34:01,066 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?...'
2025-05-05 11:34:01,085 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:34:01,085 - PLN_Processor - DEBUG -     -> Encontrada: 'CBAV3' (ORG)
2025-05-05 11:34:01,085 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['CBAV3']}
2025-05-05 11:34:01,085 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:34:01,086 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:34:01,086 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 11:34:01,088 - PLN_Processor - DEBUG -   Encontrado apenas DMA ('08/05/2023').
2025-05-05 11:34:01,088 - PLN_Processor - INFO - Data explícita encontrada e validada: '08/05/2023' -> 2023-05-08
2025-05-05 11:34:01,088 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:34:01,089 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:34:01,090 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:34:01,090 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:34:01,090 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:34:01,091 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:34:01,092 - PLN_Processor - DEBUG - Buscando template similar para 'qual foi o preco de abertura da cbav3 em 08052023' (Limiar 0.65) em 18 linhas...
2025-05-05 11:34:01,092 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.7736
2025-05-05 11:34:01,093 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.7736
2025-05-05 11:34:01,093 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=1.0000
2025-05-05 11:34:01,093 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1B', Sim=1.0000
2025-05-05 11:34:01,094 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=0.4894
2025-05-05 11:34:01,094 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3294
2025-05-05 11:34:01,095 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5345
2025-05-05 11:34:01,096 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4333
2025-05-05 11:34:01,097 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.7200
2025-05-05 11:34:01,097 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.6195
2025-05-05 11:34:01,098 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.7143
2025-05-05 11:34:01,099 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4286
2025-05-05 11:34:01,100 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.4029
2025-05-05 11:34:01,101 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.4211
2025-05-05 11:34:01,102 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.4252
2025-05-05 11:34:01,103 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.4602
2025-05-05 11:34:01,104 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.4034
2025-05-05 11:34:01,107 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.4167
2025-05-05 11:34:01,108 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3333
2025-05-05 11:34:01,109 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3051
2025-05-05 11:34:01,109 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 1.0000)
2025-05-05 11:34:01,109 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 1B - Qual foi o preço de abertura da CBAV3 em 08/05/2023?'
2025-05-05 11:34:01,110 - PLN_Processor - INFO - Template selecionado: 'Template 1B' (Similaridade: 1.0000).
2025-05-05 11:34:01,110 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:34:01,111 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:34:01,111 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:34:01,112 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:34:01,112 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:34:01,112 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:34:01,114 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:34:01,115 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:34:01,115 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:34:01,115 - PLN_Processor - DEBUG -   - Placeholder #DATA# mapeado para: '2023-05-08'
2025-05-05 11:34:01,115 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('CBAV3', 'ORG')]
2025-05-05 11:34:01,116 - PLN_Processor - DEBUG -     - Validando entidade NER: 'CBAV3' (ORG) -> Upper: 'CBAV3', Norm: 'CBAV3'
2025-05-05 11:34:01,116 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='CBAV3'. Parando busca de entidade.
2025-05-05 11:34:01,117 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'CBAV3' (Origem NER: 'CBAV3', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:34:01,117 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual foi o preço de abertura da cbav3 em 08/05/2023?'
2025-05-05 11:34:01,117 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:34:01,117 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Sim
2025-05-05 11:34:01,117 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='preco_abertura'
2025-05-05 11:34:01,117 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'preco_abertura'
2025-05-05 11:34:01,117 - PLN_Processor - DEBUG -   - Verificando se chave 'preco_abertura' existe no dicionário de sinônimos: Sim
2025-05-05 11:34:01,118 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'preco_abertura' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:34:01,118 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#DATA#': '2023-05-08', '#ENTIDADE_NOME#': 'CBAV3', '#VALOR_DESEJADO#': 'preco_abertura'}
2025-05-05 11:34:01,118 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:34:01,118 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:34:01,118 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 1B', Requeridos_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#', '#DATA#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#', '#DATA#'}
2025-05-05 11:34:01,119 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:34:01,119 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 1B'. Todos os requeridos foram mapeados.
2025-05-05 11:34:01,119 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:34:01,120 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 1B", "mapeamentos": {"#DATA#": "2023-05-08", "#ENTIDADE_NOME#": "CBAV3", "#VALOR_DESEJADO#": "preco_abertura"}, "_debug_info": {"pergunta_original": "Qual foi o preço de abertura da CBAV3 em 08/05/2023?", "pergunta_normalizada": "qual foi o preco de abertura da cbav3 em 08052023", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["CBAV3"]}, "nlp_data": "2023-05-08", "template_similaridade": 1.0, "placeholders_requeridos": ["#DATA#", "#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:34:01,120 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:34:01,120 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:34:01,120 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 11:34:17,827 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 11:34:17,827 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 11:34:19,474 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 11:34:19,474 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 11:34:19,475 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:34:19,475 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:34:19,475 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:34:19,476 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:34:19,476 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 11:34:19,477 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 11:34:19,478 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 11:34:19,478 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 11:34:19,478 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 10308) ---
2025-05-05 11:34:19,478 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 11:34:19,479 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 11:34:19,479 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 11:34:19,479 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:34:19,480 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 11:34:19,480 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 11:34:19,496 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 11:34:19,497 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 11:34:19,497 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 11:34:19,497 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 11:34:19,497 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 11:34:19,497 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:34:19,499 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 11:34:19,499 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 11:34:19,499 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 11:34:19,499 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 11:34:19,500 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 11:34:19,500 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 11:34:19,501 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:34:19,501 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 11:34:19,502 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 11:34:19,502 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 11:34:19,502 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 11:34:19,503 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 11:34:19,503 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 11:34:19,504 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 11:34:19,504 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 11:34:19,505 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 11:34:19,506 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 11:34:19,506 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 11:34:19,507 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 11:34:19,507 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 11:34:19,508 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 11:34:19,509 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 11:34:19,509 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 11:34:19,510 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 11:34:19,511 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 11:34:19,511 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 11:34:19,512 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 11:34:19,513 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 11:34:19,514 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 11:34:19,514 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 11:34:19,514 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 11:34:19,514 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 11:34:19,515 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 11:34:19,516 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 11:34:19,516 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 11:34:19,516 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 11:34:19,517 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 11:34:19,517 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 11:34:19,518 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 11:34:19,519 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 11:34:19,519 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 11:34:19,519 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 11:34:19,519 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 11:34:19,520 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 11:34:19,520 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GGBR4'. Parando busca de entidade.
2025-05-05 11:34:19,521 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GGBR4' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 11:34:19,521 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 11:34:19,521 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 11:34:19,521 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 11:34:19,521 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 11:34:19,521 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 11:34:19,521 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 11:34:19,521 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 11:34:19,522 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 11:34:19,522 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 11:34:19,522 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 11:34:19,522 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 11:34:19,522 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 11:34:19,522 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 11:34:19,522 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 11:34:19,523 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 11:34:19,524 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 11:34:19,525 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 11:34:19,525 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 11:34:19,525 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 11:34:19,525 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GGBR4', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 11:34:19,525 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 11:34:19,525 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 11:34:19,526 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 11:34:19,526 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 11:34:19,526 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 11:34:19,526 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 11:34:19,526 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GGBR4", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 11:34:19,527 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 11:34:19,527 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 11:34:19,527 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 14:54:50,323 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 14:54:50,324 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 14:54:52,655 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 14:54:52,655 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 14:54:52,656 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 14:54:52,656 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 14:54:52,656 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 14:54:52,656 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 14:54:52,657 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 14:54:52,658 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 14:54:52,659 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 14:54:52,659 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 14:54:52,659 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 6048) ---
2025-05-05 14:54:52,659 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 14:54:52,660 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 14:54:52,660 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 14:54:52,660 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 14:54:52,661 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 14:54:52,661 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 14:54:52,712 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 14:54:52,713 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 14:54:52,714 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 14:54:52,714 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 14:54:52,714 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 14:54:52,714 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 14:54:52,715 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 14:54:52,715 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 14:54:52,715 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 14:54:52,716 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 14:54:52,717 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 14:54:52,718 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 14:54:52,719 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 14:54:52,719 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 14:54:52,721 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 14:54:52,721 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 14:54:52,722 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 14:54:52,722 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 14:54:52,723 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 14:54:52,723 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 14:54:52,723 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 14:54:52,724 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 14:54:52,725 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 14:54:52,725 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 14:54:52,726 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 14:54:52,727 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 14:54:52,728 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 14:54:52,728 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 14:54:52,729 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 14:54:52,730 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 14:54:52,730 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 14:54:52,731 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 14:54:52,731 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 14:54:52,732 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 14:54:52,734 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 14:54:52,735 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 14:54:52,735 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 14:54:52,735 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 14:54:52,735 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 14:54:52,736 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 14:54:52,737 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 14:54:52,753 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 14:54:52,753 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 14:54:52,753 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 14:54:52,755 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 14:54:52,756 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 14:54:52,756 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 14:54:52,756 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 14:54:52,756 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 14:54:52,757 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 14:54:52,757 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GGBR4'. Parando busca de entidade.
2025-05-05 14:54:52,757 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GGBR4' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 14:54:52,758 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 14:54:52,759 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 14:54:52,760 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 14:54:52,760 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 14:54:52,760 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 14:54:52,760 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 14:54:52,760 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 14:54:52,760 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 14:54:52,760 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 14:54:52,761 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 14:54:52,762 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 14:54:52,762 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 14:54:52,762 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GGBR4', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 14:54:52,762 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 14:54:52,762 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 14:54:52,762 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}
2025-05-05 14:54:52,763 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 14:54:52,763 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 14:54:52,763 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 14:54:52,763 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GGBR4", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 14:54:52,763 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 14:54:52,764 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 14:54:52,764 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 15:18:04,410 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 15:18:04,412 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 15:18:06,405 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 15:18:06,405 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 15:18:06,406 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 15:18:06,406 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 15:18:06,407 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:18:06,408 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:18:06,408 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:18:06,412 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 15:18:06,412 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 15:18:06,413 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 15:18:06,413 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 11864) ---
2025-05-05 15:18:06,413 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 15:18:06,415 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 15:18:06,415 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 15:18:06,416 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:18:06,416 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 15:18:06,416 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 15:18:06,469 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 15:18:06,470 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 15:18:06,470 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 15:18:06,471 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 15:18:06,471 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 15:18:06,471 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:18:06,472 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 15:18:06,472 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 15:18:06,473 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 15:18:06,473 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 15:18:06,474 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 15:18:06,474 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 15:18:06,475 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 15:18:06,475 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 15:18:06,477 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 15:18:06,478 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 15:18:06,478 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 15:18:06,479 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 15:18:06,479 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 15:18:06,479 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 15:18:06,480 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 15:18:06,482 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 15:18:06,483 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 15:18:06,483 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 15:18:06,484 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 15:18:06,485 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 15:18:06,485 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 15:18:06,486 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 15:18:06,487 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 15:18:06,487 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 15:18:06,488 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 15:18:06,488 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 15:18:06,489 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 15:18:06,490 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 15:18:06,491 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 15:18:06,492 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 15:18:06,492 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:18:06,492 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 15:18:06,492 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 15:18:06,493 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 15:18:06,494 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 15:18:06,495 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 15:18:06,495 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 15:18:06,496 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 15:18:06,500 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 15:18:06,500 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 15:18:06,500 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 15:18:06,501 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 15:18:06,501 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 15:18:06,502 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 15:18:06,502 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GGBR4'. Parando busca de entidade.
2025-05-05 15:18:06,502 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GGBR4' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 15:18:06,502 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 15:18:06,503 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 15:18:06,503 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 15:18:06,503 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 15:18:06,503 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 15:18:06,503 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 15:18:06,504 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 15:18:06,505 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 15:18:06,505 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 15:18:06,505 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 15:18:06,505 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 15:18:06,505 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 15:18:06,505 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 15:18:06,505 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 15:18:06,506 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 15:18:06,507 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 15:18:06,507 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 15:18:06,507 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 15:18:06,507 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 15:18:06,507 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GGBR4', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 15:18:06,508 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 15:18:06,508 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 15:18:06,508 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}
2025-05-05 15:18:06,508 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 15:18:06,508 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 15:18:06,509 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 15:18:06,509 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GGBR4", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 15:18:06,509 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 15:18:06,509 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 15:18:06,510 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 15:29:27,423 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 15:29:27,424 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 15:29:30,938 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 15:29:30,940 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 15:29:30,940 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 15:29:30,941 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 15:29:30,941 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:29:30,942 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:29:30,943 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:29:30,950 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 15:29:30,950 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 15:29:30,950 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 15:29:30,951 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 576) ---
2025-05-05 15:29:30,952 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 15:29:30,953 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 15:29:30,953 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 15:29:30,954 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:29:30,954 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 15:29:30,955 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 15:29:31,016 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 15:29:31,017 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 15:29:31,017 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 15:29:31,017 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 15:29:31,018 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 15:29:31,018 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:29:31,020 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 15:29:31,020 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 15:29:31,021 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 15:29:31,021 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 15:29:31,023 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 15:29:31,023 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 15:29:31,024 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 15:29:31,024 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 15:29:31,025 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 15:29:31,027 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 15:29:31,027 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 15:29:31,029 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 15:29:31,030 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 15:29:31,030 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 15:29:31,032 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 15:29:31,033 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 15:29:31,035 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 15:29:31,036 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 15:29:31,038 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 15:29:31,039 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 15:29:31,041 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 15:29:31,042 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 15:29:31,044 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 15:29:31,045 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 15:29:31,046 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 15:29:31,048 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 15:29:31,049 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 15:29:31,051 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 15:29:31,053 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 15:29:31,054 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 15:29:31,054 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:29:31,054 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 15:29:31,055 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 15:29:31,056 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 15:29:31,057 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 15:29:31,058 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 15:29:31,058 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 15:29:31,059 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 15:29:31,062 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 15:29:31,062 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 15:29:31,063 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 15:29:31,063 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 15:29:31,063 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 15:29:31,065 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 15:29:31,065 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GERDAU'. Parando busca de entidade.
2025-05-05 15:29:31,065 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GERDAU' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 15:29:31,069 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 15:29:31,069 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 15:29:31,069 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 15:29:31,070 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 15:29:31,070 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 15:29:31,070 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 15:29:31,070 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 15:29:31,071 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 15:29:31,073 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 15:29:31,073 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 15:29:31,073 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 15:29:31,074 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 15:29:31,074 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 15:29:31,075 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 15:29:31,077 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 15:29:31,077 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 15:29:31,078 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 15:29:31,078 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 15:29:31,079 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 15:29:31,079 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 15:29:31,079 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 15:29:31,083 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 15:29:31,083 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 15:29:31,083 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 15:29:31,083 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 15:29:31,084 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 15:29:31,084 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 15:29:31,084 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 15:29:31,084 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 15:29:31,084 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 15:29:31,085 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 15:29:31,085 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 15:29:31,085 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 15:29:31,086 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GERDAU', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 15:29:31,086 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 15:29:31,086 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 15:29:31,087 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#ENTIDADE_NOME#', '#VALOR_DESEJADO#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}
2025-05-05 15:29:31,087 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 15:29:31,088 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 15:29:31,088 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 15:29:31,089 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GERDAU", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 15:29:31,089 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 15:29:31,090 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 15:29:31,092 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
2025-05-05 15:35:12,927 - PLN_Processor - INFO - --- LOG INICIADO: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\pln_processor.log ---
2025-05-05 15:35:12,927 - PLN_Processor - INFO - Carregando modelo spaCy 'pt_core_news_sm'...
2025-05-05 15:35:15,074 - PLN_Processor - INFO - Modelo spaCy carregado com sucesso.
2025-05-05 15:35:15,075 - PLN_Processor - INFO - Diretório base dos resources: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources
2025-05-05 15:35:15,075 - PLN_Processor - INFO - Caminho dicionário sinônimos: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 15:35:15,075 - PLN_Processor - INFO - Caminho perguntas interesse: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 15:35:15,076 - PLN_Processor - INFO - Caminho mapa empresas JSON: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:35:15,076 - PLN_Processor - INFO - Encontrado mapa JSON em: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:35:15,076 - PLN_Processor - INFO - Abrindo mapa JSON de: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\empresa_nome_map.json
2025-05-05 15:35:15,079 - PLN_Processor - INFO - Carregados 726 mapeamentos do JSON.
2025-05-05 15:35:15,080 - PLN_Processor - DEBUG -  Exemplo de mapeamento JSON carregado: ('3RPETROLEUM', 'RRRP3')
2025-05-05 15:35:15,080 - PLN_Processor - INFO - --- ================================= ---
2025-05-05 15:35:15,080 - PLN_Processor - INFO - --- INICIANDO EXECUÇÃO PLN_PROCESSOR.PY (PID: 11048) ---
2025-05-05 15:35:15,081 - PLN_Processor - INFO - --- Argumentos Recebidos: ['C:\\Users\\MENICIO JR\\Desktop\\Natural2SPARQL-master\\src\\main\\resources\\pln_processor.py', 'Qual o código de negociação da ação da Gerdau?'] ---
2025-05-05 15:35:15,082 - PLN_Processor - INFO - --- Diretório Atual (CWD): C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master ---
2025-05-05 15:35:15,082 - PLN_Processor - INFO - --- Diretório do Script: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources ---
2025-05-05 15:35:15,083 - PLN_Processor - INFO - Pergunta do usuário recebida: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:35:15,083 - PLN_Processor - INFO - --- Passo 1: Executando NLP (spaCy)... ---
2025-05-05 15:35:15,083 - PLN_Processor - DEBUG - Executando análise spaCy para: 'Qual o código de negociação da ação da Gerdau?...'
2025-05-05 15:35:15,123 - PLN_Processor - DEBUG -   --- NER (spaCy):
2025-05-05 15:35:15,123 - PLN_Processor - DEBUG -     -> Encontrada: 'Gerdau' (ORG)
2025-05-05 15:35:15,123 - PLN_Processor - INFO -   NER (spaCy - final agrupado): {'ORG': ['Gerdau']}
2025-05-05 15:35:15,123 - PLN_Processor - DEBUG -   --- SPO (spaCy - heurística):
2025-05-05 15:35:15,123 - PLN_Processor - INFO -   SPO (spaCy - final agrupado): {'sujeito': [], 'predicado': [], 'objeto': []}
2025-05-05 15:35:15,123 - PLN_Processor - DEBUG - Tentando extrair data do texto: 'Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:35:15,124 - PLN_Processor - DEBUG -   Nenhuma data explícita (dd/mm/aaaa ou aaaa-mm-dd) encontrada. Verificando keywords...
2025-05-05 15:35:15,125 - PLN_Processor - INFO - Nenhuma data explícita ou keyword de data encontrada no texto.
2025-05-05 15:35:15,125 - PLN_Processor - INFO - Análise NLP concluída.
2025-05-05 15:35:15,125 - PLN_Processor - INFO - --- Passo 2: Selecionando Template por similaridade... ---
2025-05-05 15:35:15,126 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\perguntas_de_interesse.txt
2025-05-05 15:35:15,127 - PLN_Processor - DEBUG -   Tentando ler 'perguntas_de_interesse.txt' com encoding 'utf-8'...
2025-05-05 15:35:15,128 - PLN_Processor - INFO - Arquivo 'perguntas_de_interesse.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 15:35:15,128 - PLN_Processor - DEBUG - Carregadas 18 linhas de 'perguntas_de_interesse.txt'.
2025-05-05 15:35:15,129 - PLN_Processor - DEBUG - Buscando template similar para 'qual o codigo de negociacao da acao da gerdau' (Limiar 0.65) em 18 linhas...
2025-05-05 15:35:15,130 - PLN_Processor - DEBUG -  -> Template 'Template 1A' (Ex: 'qual foi o preco de fechamento da acao da csn em 08052023'): Sim=0.5490
2025-05-05 15:35:15,130 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 1A', Sim=0.5490
2025-05-05 15:35:15,131 - PLN_Processor - DEBUG -  -> Template 'Template 1B' (Ex: 'qual foi o preco de abertura da cbav3 em 08052023'): Sim=0.4681
2025-05-05 15:35:15,132 - PLN_Processor - DEBUG -  -> Template 'Template 2A' (Ex: 'qual o codigo de negociacao da acao da gerdau'): Sim=1.0000
2025-05-05 15:35:15,132 - PLN_Processor - DEBUG -    --> Novo melhor: Template='Template 2A', Sim=1.0000
2025-05-05 15:35:15,132 - PLN_Processor - DEBUG -  -> Template 'Template 3A' (Ex: 'quais sao as acoes do setor eletrico'): Sim=0.3951
2025-05-05 15:35:15,133 - PLN_Processor - DEBUG -  -> Template 'Template 4A' (Ex: 'qual foi o volume negociado nas acoes do setor bancario em 05052023'): Sim=0.5000
2025-05-05 15:35:15,134 - PLN_Processor - DEBUG -  -> Template 'Template 4B' (Ex: 'qual foi a quantidade de acoes do itau negociadas no pregao de 05052023'): Sim=0.4138
2025-05-05 15:35:15,134 - PLN_Processor - DEBUG -  -> Template 'Template 5A' (Ex: 'qual foi o preco minimo da acao da vale em 08052023'): Sim=0.5417
2025-05-05 15:35:15,135 - PLN_Processor - DEBUG -  -> Template 'Template 5B' (Ex: 'qual foi o preco minima da acao preferencial do itau em 05052023'): Sim=0.4954
2025-05-05 15:35:15,136 - PLN_Processor - DEBUG -  -> Template 'Template 5C' (Ex: 'qual foi o preco maximo da acao ordinaria da gerdau em 08052023'): Sim=0.5370
2025-05-05 15:35:15,137 - PLN_Processor - DEBUG -  -> Template 'Template 6A' (Ex: 'qual foi a variacao intradiaria absoluta da acao da csn no pregao de 08052023'): Sim=0.4426
2025-05-05 15:35:15,138 - PLN_Processor - DEBUG -  -> Template 'Template 7A' (Ex: 'qual acao do setor de mineracao que teve a maior alta percentual no pregao do dia 08052023'): Sim=0.2519
2025-05-05 15:35:15,139 - PLN_Processor - DEBUG -  -> Template 'Template 7B' (Ex: 'qual acao do setor de bancario que teve a baixa percentual no pregao do dia 08052023'): Sim=0.2636
2025-05-05 15:35:15,140 - PLN_Processor - DEBUG -  -> Template 'Template 7C' (Ex: 'qual acao do setor de consumo nao ciclico que a menor variacao no dia 08052023'): Sim=0.2764
2025-05-05 15:35:15,141 - PLN_Processor - DEBUG -  -> Template 'Template 7D' (Ex: 'qual a acao com o maior percentual de alta no pregao de 08052023'): Sim=0.3119
2025-05-05 15:35:15,142 - PLN_Processor - DEBUG -  -> Template 'Template 7E' (Ex: 'quais as cinco acoes de maior percentual de alta no pregao de 08052023'): Sim=0.2261
2025-05-05 15:35:15,142 - PLN_Processor - DEBUG -  -> Template 'Template 7F' (Ex: 'quais as cinco acoes de maior percentual de baixa no pregao de 08052023'): Sim=0.2241
2025-05-05 15:35:15,143 - PLN_Processor - DEBUG -  -> Template 'Template 8A' (Ex: 'qual foi a variacao intradiaria absoluta da acao do ibovespa com o maior percentual de alta no pregao de 08052023'): Sim=0.3671
2025-05-05 15:35:15,144 - PLN_Processor - DEBUG -  -> Template 'Template 8B' (Ex: 'qual foi o intervalo intradiario percentual da acao com o maior percentual de baixa entre as acoes do imat no pregao de 08052023'): Sim=0.3353
2025-05-05 15:35:15,145 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000)
2025-05-05 15:35:15,145 - PLN_Processor - DEBUG -  Linha original do template selecionado: 'Template 2A - Qual o código de negociação da ação da Gerdau?'
2025-05-05 15:35:15,145 - PLN_Processor - INFO - Template selecionado: 'Template 2A' (Similaridade: 1.0000).
2025-05-05 15:35:15,145 - PLN_Processor - INFO - --- Passo 3: Mapeando placeholders com base na NLP e dicionários... ---
2025-05-05 15:35:15,146 - PLN_Processor - DEBUG - Tentando carregar linhas do arquivo: C:\Users\MENICIO JR\Desktop\Natural2SPARQL-master\src\main\resources\resultado_similaridade.txt
2025-05-05 15:35:15,146 - PLN_Processor - DEBUG -   Tentando ler 'resultado_similaridade.txt' com encoding 'utf-8'...
2025-05-05 15:35:15,148 - PLN_Processor - INFO - Arquivo 'resultado_similaridade.txt' lido com sucesso usando encoding 'utf-8'.
2025-05-05 15:35:15,148 - PLN_Processor - DEBUG - Carregadas 40 linhas de 'resultado_similaridade.txt'.
2025-05-05 15:35:15,148 - PLN_Processor - INFO - Processando dicionário de sinônimos 'resultado_similaridade.txt' (40 linhas lidas)...
2025-05-05 15:35:15,150 - PLN_Processor - INFO - Dicionário 'resultado_similaridade.txt' carregado com sucesso: 21 chaves únicas (21 linhas válidas processadas).
2025-05-05 15:35:15,150 - PLN_Processor - DEBUG -  Chaves carregadas: ['acao', 'classe_a', 'classe_b', 'codigo', 'empresa', 'intervalo_perc', 'ordinaria', 'preco_abertura', 'preco_fechamento', 'preco_maximo', 'preco_medio', 'preco_minimo', 'preferencial', 'quantidade_negociada', 'setor_energia', 'setor_financeiro', 'setor_materiais_basicos', 'total_negocios', 'variacao_abs', 'variacao_perc', 'volume_total_negociado']
2025-05-05 15:35:15,151 - PLN_Processor - DEBUG - Iniciando mapeamento de placeholders...
2025-05-05 15:35:15,151 - PLN_Processor - DEBUG -   - Placeholder #DATA# não encontrado/mapeado.
2025-05-05 15:35:15,151 - PLN_Processor - DEBUG -   - Entidades NER (priorizadas) para buscar no mapa: [('Gerdau', 'ORG')]
2025-05-05 15:35:15,152 - PLN_Processor - DEBUG -     - Validando entidade NER: 'Gerdau' (ORG) -> Upper: 'GERDAU', Norm: 'GERDAU'
2025-05-05 15:35:15,152 - PLN_Processor - DEBUG -     --> MATCH EXATO (Upper)! Canônico='GERDAU'. Parando busca de entidade.
2025-05-05 15:35:15,152 - PLN_Processor - INFO -   - Placeholder #ENTIDADE_NOME# mapeado para: 'GERDAU' (Origem NER: 'Gerdau', Tipo Detecção: NER ORG (Match Exato))
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -   - Texto p/ busca KW de #VALOR_DESEJADO# (pergunta_lower): 'qual o código de negociação da ação da gerdau?'
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -   - Buscando keywords primárias para #VALOR_DESEJADO#...
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de abertura' in pergunta_lower? Não
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de abertura' in pergunta_lower? Não
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -     - Testando KW primária: 'abertura' in pergunta_lower? Não
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço de fechamento' in pergunta_lower? Não
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco de fechamento' in pergunta_lower? Não
2025-05-05 15:35:15,153 - PLN_Processor - DEBUG -     - Testando KW primária: 'fechamento' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo negocio' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'ultimo preco' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco final' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço máximo' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco maximo' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'máximo' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'maximo' in pergunta_lower? Não
2025-05-05 15:35:15,154 - PLN_Processor - DEBUG -     - Testando KW primária: 'maior preco' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor maximo' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço mínimo' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco minimo' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'mínimo' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'minimo' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'menor preco' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'valor minimo' in pergunta_lower? Não
2025-05-05 15:35:15,155 - PLN_Processor - DEBUG -     - Testando KW primária: 'preço médio' in pergunta_lower? Não
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -     - Testando KW primária: 'preco medio' in pergunta_lower? Não
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -     - Testando KW primária: 'médio' in pergunta_lower? Não
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -     - Testando KW primária: 'medio' in pergunta_lower? Não
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -     - Testando KW primária: 'media de preco' in pergunta_lower? Não
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -     - Testando KW primária: 'código de negociação' in pergunta_lower? Sim
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -     --> Keyword primária ENCONTRADA! Definindo vd_chave='codigo'
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -   - Chave selecionada (vd_chave) após loops de keywords: 'codigo'
2025-05-05 15:35:15,156 - PLN_Processor - DEBUG -   - Verificando se chave 'codigo' existe no dicionário de sinônimos: Sim
2025-05-05 15:35:15,157 - PLN_Processor - INFO -   - Placeholder #VALOR_DESEJADO# mapeado para: 'codigo' (Keyword encontrada e chave validada no dicionário)
2025-05-05 15:35:15,157 - PLN_Processor - INFO - Mapeamentos finais encontrados: {'#ENTIDADE_NOME#': 'GERDAU', '#VALOR_DESEJADO#': 'codigo'}
2025-05-05 15:35:15,157 - PLN_Processor - INFO - Mapeamento de placeholders concluído.
2025-05-05 15:35:15,157 - PLN_Processor - INFO - --- Passo 4: Validando placeholders mapeados contra os requeridos pelo template (usando Sets e Limpeza String)... ---
2025-05-05 15:35:15,158 - PLN_Processor - DEBUG -   >> Validação (Pós-strip): Template='Template 2A', Requeridos_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}, Encontrados_Set={'#VALOR_DESEJADO#', '#ENTIDADE_NOME#'}
2025-05-05 15:35:15,158 - PLN_Processor - DEBUG -   >> Placeholders Faltantes (Resultado da diferença de Sets Pós-strip): set()
2025-05-05 15:35:15,158 - PLN_Processor - INFO - Validação de placeholders OK para template 'Template 2A'. Todos os requeridos foram mapeados.
2025-05-05 15:35:15,158 - PLN_Processor - INFO - --- Passo 5: Construindo a resposta JSON final... ---
2025-05-05 15:35:15,158 - PLN_Processor - DEBUG - JSON final a ser enviado: {"template_nome": "Template 2A", "mapeamentos": {"#ENTIDADE_NOME#": "GERDAU", "#VALOR_DESEJADO#": "codigo"}, "_debug_info": {"pergunta_original": "Qual o código de negociação da ação da Gerdau?", "pergunta_normalizada": "qual o codigo de negociacao da acao da gerdau", "nlp_spo": {"sujeito": [], "predicado": [], "objeto": []}, "nlp_ner": {"ORG": ["Gerdau"]}, "nlp_data": null, "template_similaridade": 1.0, "placeholders_requeridos": ["#ENTIDADE_NOME#", "#VALOR_DESEJADO#"]}}
2025-05-05 15:35:15,159 - PLN_Processor - INFO - --- Passo 6: Enviando resposta JSON para stdout... ---
2025-05-05 15:35:15,159 - PLN_Processor - INFO - Resposta JSON enviada com sucesso.
2025-05-05 15:35:15,159 - PLN_Processor - INFO - --- Processamento PLN Script concluído com sucesso (status 0) ---
